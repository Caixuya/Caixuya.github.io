<!DOCTYPE html>
<html lang="en,zh-CN,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/undefined/pace/pace-theme-pace-theme-center-atom.min.css">
  <script src="/undefined/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"caixuya.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"B5HBQCBE1B","apiKey":"ea181e93e7b10c0d94c8e758b7eb25ab","indexName":"hexo","hits":{"per_page":10},"labels":{"input_placeholder":"输入关键字","hits_empty":"没有找到与「${query}」相关的内容","hits_stats":"${hits}条相关记录，共耗时 ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="tia的学习笔记">
<meta property="og:url" content="http://caixuya.github.io/index.html">
<meta property="og:site_name" content="tia的学习笔记">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="caixuya">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://caixuya.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>tia的学习笔记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="tia的学习笔记" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">tia的学习笔记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-主页">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页</a>

  </li>
        <li class="menu-item menu-item-分类">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-目录">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>目录</a>

  </li>
        <li class="menu-item menu-item-站点地图">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-关于我">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于我</a>

  </li>
        <li class="menu-item menu-item-开往">

    <a href="/travelling/" rel="section"><i class="fa fa-paper-plane fa-fw"></i>开往</a>

  </li>
        <li class="menu-item menu-item-给我写信">

    <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=vY_MiY2FhI2Ojf3MzJPe0tA" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>给我写信</a>

  </li>
        <li class="menu-item menu-item-公益404">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2025/11/19/DVWA_Brute_Force_%E6%94%BB%E5%87%BB%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/11/19/DVWA_Brute_Force_%E6%94%BB%E5%87%BB%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4/" class="post-title-link" itemprop="url">DVWA Brute Force 攻击详细步骤指南</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-11-19 21:06:22 / Modified: 21:06:06" itemprop="dateCreated datePublished" datetime="2025-11-19T21:06:22+08:00">2025-11-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dvwa%E9%9D%B6%E5%9C%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">dvwa靶场学习笔记</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>4.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>4 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="DVWA-Brute-Force-攻击详细步骤指南"><a href="#DVWA-Brute-Force-攻击详细步骤指南" class="headerlink" title="DVWA Brute Force 攻击详细步骤指南"></a>DVWA Brute Force 攻击详细步骤指南</h1><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><ul>
<li>Burp Suite 已正确配置并运行在 127.0.0.1:8082</li>
<li>浏览器代理已设置为 Burp Suite（通过 SwitchyOmega 或其他方式）</li>
<li>DVWA 已安装并可访问</li>
<li>DVWA 安全级别设置为 Low</li>
</ul>
<h2 id="攻击流程概览"><a href="#攻击流程概览" class="headerlink" title="攻击流程概览"></a>攻击流程概览</h2><ol>
<li>捕获登录请求</li>
<li>将请求发送到 Intruder</li>
<li>配置攻击位置（用户名和密码）</li>
<li>配置攻击类型</li>
<li>加载用户名和密码字典</li>
<li>执行暴力破解攻击</li>
<li>分析攻击结果</li>
</ol>
<hr>
<h2 id="第一步：捕获登录请求"><a href="#第一步：捕获登录请求" class="headerlink" title="第一步：捕获登录请求"></a>第一步：捕获登录请求</h2><h3 id="1-1-确保-Burp-Intercept-已开启"><a href="#1-1-确保-Burp-Intercept-已开启" class="headerlink" title="1.1 确保 Burp Intercept 已开启"></a>1.1 确保 Burp Intercept 已开启</h3><ul>
<li>在 Burp Suite 中，点击 <strong>Proxy → Intercept</strong> 标签</li>
<li>确认按钮显示 **”Intercept is on”**（蓝色高亮状态）</li>
</ul>
<h3 id="1-2-在浏览器中提交登录"><a href="#1-2-在浏览器中提交登录" class="headerlink" title="1.2 在浏览器中提交登录"></a>1.2 在浏览器中提交登录</h3><ul>
<li>访问 DVWA 的 Brute Force 页面：<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span><span class="regexp">/dvwa/</span>vulnerabilities<span class="regexp">/brute/</span></span><br></pre></td></tr></table></figure>
或者<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>localhost<span class="regexp">/dvwa/</span>vulnerabilities<span class="regexp">/brute/</span></span><br></pre></td></tr></table></figure></li>
<li>输入任意用户名（例如 <code>admin</code>）</li>
<li>输入任意密码（例如 <code>123456</code>）</li>
<li>点击 <strong>Login</strong> 按钮</li>
</ul>
<h3 id="1-3-在-Burp-中查看被拦截的请求"><a href="#1-3-在-Burp-中查看被拦截的请求" class="headerlink" title="1.3 在 Burp 中查看被拦截的请求"></a>1.3 在 Burp 中查看被拦截的请求</h3><ul>
<li>回到 Burp Suite 的 <strong>Intercept</strong> 标签</li>
<li>你应该能看到一个 GET 请求，类似：</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/dvwa/vulnerabilities/brute/?username=admin&amp;password=123456&amp;Login=Login</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>127.0.0.1</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>PHPSESSID=xxxxx; security=low</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 ...</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml...</span><br></pre></td></tr></table></figure>

<h3 id="1-4-将请求发送到-Intruder"><a href="#1-4-将请求发送到-Intruder" class="headerlink" title="1.4 将请求发送到 Intruder"></a>1.4 将请求发送到 Intruder</h3><ul>
<li>右键点击请求内容区域</li>
<li>选择 <strong>“Send to Intruder”</strong></li>
<li>点击 <strong>“Forward”</strong> 按钮让这个请求通过（或点击 “Drop” 丢弃）</li>
</ul>
<hr>
<h2 id="第二步：配置-Intruder-攻击"><a href="#第二步：配置-Intruder-攻击" class="headerlink" title="第二步：配置 Intruder 攻击"></a>第二步：配置 Intruder 攻击</h2><h3 id="2-1-进入-Intruder-标签"><a href="#2-1-进入-Intruder-标签" class="headerlink" title="2.1 进入 Intruder 标签"></a>2.1 进入 Intruder 标签</h3><ul>
<li>点击 Burp Suite 顶部的 <strong>Intruder</strong> 标签</li>
<li>你会看到刚才发送过来的请求</li>
</ul>
<h3 id="2-2-配置攻击位置（Positions）"><a href="#2-2-配置攻击位置（Positions）" class="headerlink" title="2.2 配置攻击位置（Positions）"></a>2.2 配置攻击位置（Positions）</h3><ul>
<li>点击 <strong>Intruder → Positions</strong> 子标签</li>
<li>点击右侧的 <strong>“Clear §”</strong> 按钮，清除所有自动标记的位置</li>
<li>找到 URL 中的用户名和密码参数，例如：</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> /dvwa/vulnerabilities/brute/?username=<span class="keyword">admin</span>&amp;<span class="keyword">password</span>=<span class="number">123456</span>&amp;<span class="keyword">Login</span>=<span class="keyword">Login</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>手动标记用户名</strong>：</p>
<ul>
<li>用鼠标选中 <code>admin</code>（用户名的值）</li>
<li>点击右侧的 <strong>“Add §”</strong> 按钮</li>
</ul>
</li>
<li><p><strong>手动标记密码</strong>：</p>
<ul>
<li>用鼠标选中 <code>123456</code>（密码的值）</li>
<li>点击右侧的 <strong>“Add §”</strong> 按钮</li>
</ul>
</li>
<li><p>标记完成后应该显示为：</p>
</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> /dvwa/vulnerabilities/brute/?username=§<span class="keyword">admin</span>§&amp;<span class="keyword">password</span>=§<span class="number">123456</span>§&amp;<span class="keyword">Login</span>=<span class="keyword">Login</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-选择攻击类型"><a href="#2-3-选择攻击类型" class="headerlink" title="2.3 选择攻击类型"></a>2.3 选择攻击类型</h3><ul>
<li>在 <strong>Attack type</strong> 下拉菜单中选择 **”Cluster bomb”**（集束炸弹模式）</li>
<li>这个模式会尝试所有用户名和密码的组合</li>
</ul>
<h4 id="攻击类型说明："><a href="#攻击类型说明：" class="headerlink" title="攻击类型说明："></a>攻击类型说明：</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Sniper（狙击手）</strong></td>
<td>一次只改变一个参数</td>
<td>单一字段攻击</td>
</tr>
<tr>
<td><strong>Battering ram（攻城锤）</strong></td>
<td>所有位置使用相同的 payload</td>
<td>相同值测试</td>
</tr>
<tr>
<td><strong>Pitchfork（草叉）</strong></td>
<td>并行测试，第1个用户名配第1个密码</td>
<td>已知配对组合</td>
</tr>
<tr>
<td><strong>Cluster bomb（集束炸弹）</strong></td>
<td>测试所有可能的组合</td>
<td><strong>暴力破解推荐</strong></td>
</tr>
</tbody></table>
<hr>
<h2 id="第三步：配置字典（Payloads）"><a href="#第三步：配置字典（Payloads）" class="headerlink" title="第三步：配置字典（Payloads）"></a>第三步：配置字典（Payloads）</h2><h3 id="3-1-进入-Payloads-标签"><a href="#3-1-进入-Payloads-标签" class="headerlink" title="3.1 进入 Payloads 标签"></a>3.1 进入 Payloads 标签</h3><ul>
<li>点击 <strong>Intruder → Payloads</strong> 子标签</li>
</ul>
<h3 id="3-2-配置用户名字典（Payload-set-1）"><a href="#3-2-配置用户名字典（Payload-set-1）" class="headerlink" title="3.2 配置用户名字典（Payload set 1）"></a>3.2 配置用户名字典（Payload set 1）</h3><ul>
<li>确保 <strong>Payload set</strong> 下拉菜单选择 <strong>1</strong></li>
<li><strong>Payload type</strong> 选择 <strong>“Simple list”</strong></li>
<li>在 <strong>Payload settings [Simple list]</strong> 部分，手动添加常见用户名：</li>
</ul>
<table>
<thead>
<tr>
<th>用户名</th>
<th>操作</th>
</tr>
</thead>
<tbody><tr>
<td>admin</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>root</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>user</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>test</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>administrator</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
</tbody></table>
<h3 id="3-3-配置密码字典（Payload-set-2）"><a href="#3-3-配置密码字典（Payload-set-2）" class="headerlink" title="3.3 配置密码字典（Payload set 2）"></a>3.3 配置密码字典（Payload set 2）</h3><ul>
<li>将 <strong>Payload set</strong> 下拉菜单切换到 <strong>2</strong></li>
<li><strong>Payload type</strong> 保持 <strong>“Simple list”</strong></li>
<li>添加常见密码：</li>
</ul>
<table>
<thead>
<tr>
<th>密码</th>
<th>操作</th>
</tr>
</thead>
<tbody><tr>
<td>password</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>123456</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>admin</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>12345</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>password123</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>root</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>letmein</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>welcome</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>qwerty</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
<tr>
<td>abc123</td>
<td>在输入框中输入，点击 <strong>“Add”</strong></td>
</tr>
</tbody></table>
<h3 id="重要提示"><a href="#重要提示" class="headerlink" title="重要提示"></a>重要提示</h3><p>DVWA 默认账户通常是：</p>
<ul>
<li><strong>用户名</strong>：<code>admin</code></li>
<li><strong>密码</strong>：<code>password</code></li>
</ul>
<p>所以如果使用上述字典，应该能成功破解。</p>
<h3 id="3-4-使用字典文件（可选）"><a href="#3-4-使用字典文件（可选）" class="headerlink" title="3.4 使用字典文件（可选）"></a>3.4 使用字典文件（可选）</h3><p>如果你有更大的密码字典文件：</p>
<ol>
<li>在 <strong>Payload settings</strong> 部分</li>
<li>点击 <strong>“Load…”</strong> 按钮</li>
<li>选择你的字典文件（.txt 格式，每行一个条目）</li>
</ol>
<p>常见的密码字典：</p>
<ul>
<li>SecLists（GitHub 上的开源密码字典集合）</li>
<li>RockYou.txt（常用的大型密码字典）</li>
</ul>
<hr>
<h2 id="第四步：启动攻击"><a href="#第四步：启动攻击" class="headerlink" title="第四步：启动攻击"></a>第四步：启动攻击</h2><h3 id="4-1-关闭拦截（推荐）"><a href="#4-1-关闭拦截（推荐）" class="headerlink" title="4.1 关闭拦截（推荐）"></a>4.1 关闭拦截（推荐）</h3><ul>
<li>回到 <strong>Proxy → Intercept</strong> 标签</li>
<li>点击按钮切换为 <strong>“Intercept is off”</strong></li>
<li>这样攻击过程中的请求不会被拦截打断</li>
</ul>
<h3 id="4-2-开始攻击"><a href="#4-2-开始攻击" class="headerlink" title="4.2 开始攻击"></a>4.2 开始攻击</h3><ul>
<li>回到 <strong>Intruder</strong> 标签</li>
<li>点击右上角的 <strong>“Start attack”</strong> 按钮</li>
<li>会弹出一个新窗口显示攻击进度</li>
</ul>
<h3 id="4-3-攻击进行中"><a href="#4-3-攻击进行中" class="headerlink" title="4.3 攻击进行中"></a>4.3 攻击进行中</h3><ul>
<li>攻击窗口会实时显示每个请求的结果</li>
<li>显示的列包括：<ul>
<li><strong>Request</strong>：请求编号</li>
<li><strong>Payload 1</strong>：尝试的用户名</li>
<li><strong>Payload 2</strong>：尝试的密码</li>
<li><strong>Status</strong>：HTTP 状态码</li>
<li><strong>Error</strong>：错误信息</li>
<li><strong>Timeout</strong>：是否超时</li>
<li><strong>Length</strong>：响应长度（重要！）</li>
</ul>
</li>
</ul>
<hr>
<h2 id="第五步：分析结果"><a href="#第五步：分析结果" class="headerlink" title="第五步：分析结果"></a>第五步：分析结果</h2><h3 id="5-1-查看攻击结果窗口"><a href="#5-1-查看攻击结果窗口" class="headerlink" title="5.1 查看攻击结果窗口"></a>5.1 查看攻击结果窗口</h3><p>在攻击结果窗口中，所有尝试的组合都会被记录下来。</p>
<h3 id="5-2-识别成功的登录"><a href="#5-2-识别成功的登录" class="headerlink" title="5.2 识别成功的登录"></a>5.2 识别成功的登录</h3><h4 id="方法-1：根据响应长度判断（最常用）"><a href="#方法-1：根据响应长度判断（最常用）" class="headerlink" title="方法 1：根据响应长度判断（最常用）"></a>方法 1：根据响应长度判断（最常用）</h4><ol>
<li>点击 <strong>Length</strong> 列头进行排序</li>
<li>观察响应长度：<ul>
<li>失败的登录：响应长度通常相同（例如都是 4520 字节）</li>
<li>成功的登录：响应长度会明显不同（例如 4850 字节）</li>
</ul>
</li>
<li>找出响应长度异常的那一行</li>
</ol>
<h4 id="方法-2：搜索响应内容"><a href="#方法-2：搜索响应内容" class="headerlink" title="方法 2：搜索响应内容"></a>方法 2：搜索响应内容</h4><ol>
<li>选中某一行请求</li>
<li>查看下方的 <strong>Response</strong> 标签</li>
<li>点击 <strong>Render</strong> 或 <strong>Raw</strong> 查看响应内容</li>
<li>成功登录的特征：<ul>
<li>响应中包含 “Welcome to the password protected area”</li>
<li>或者显示用户信息</li>
</ul>
</li>
<li>失败登录的特征：<ul>
<li>响应中包含 “Username and&#x2F;or password incorrect”</li>
</ul>
</li>
</ol>
<h4 id="方法-3：使用-Grep-功能"><a href="#方法-3：使用-Grep-功能" class="headerlink" title="方法 3：使用 Grep 功能"></a>方法 3：使用 Grep 功能</h4><ol>
<li>在攻击开始前，在 <strong>Intruder → Options</strong> 标签中</li>
<li>找到 <strong>Grep - Match</strong> 部分</li>
<li>点击 <strong>“Add”</strong> 添加关键字：<ul>
<li><code>Welcome</code> （成功标志）</li>
<li><code>incorrect</code> （失败标志）</li>
</ul>
</li>
<li>攻击结果中会显示这些关键字是否出现</li>
</ol>
<h3 id="5-3-记录成功的凭证"><a href="#5-3-记录成功的凭证" class="headerlink" title="5.3 记录成功的凭证"></a>5.3 记录成功的凭证</h3><p>找到成功的组合后，记录下来：</p>
<table>
<thead>
<tr>
<th>用户名</th>
<th>密码</th>
<th>验证状态</th>
</tr>
</thead>
<tbody><tr>
<td>admin</td>
<td>password</td>
<td>✓ 成功</td>
</tr>
</tbody></table>
<hr>
<h2 id="第六步：验证结果"><a href="#第六步：验证结果" class="headerlink" title="第六步：验证结果"></a>第六步：验证结果</h2><h3 id="6-1-手动验证"><a href="#6-1-手动验证" class="headerlink" title="6.1 手动验证"></a>6.1 手动验证</h3><ol>
<li>在浏览器中访问 DVWA 的 Brute Force 页面</li>
<li>输入找到的用户名和密码</li>
<li>点击 Login 按钮</li>
<li>确认可以成功登录并看到成功消息</li>
</ol>
<h3 id="6-2-使用-Repeater-验证"><a href="#6-2-使用-Repeater-验证" class="headerlink" title="6.2 使用 Repeater 验证"></a>6.2 使用 Repeater 验证</h3><ol>
<li>在攻击结果窗口中，选中成功的那一行</li>
<li>右键选择 <strong>“Send to Repeater”</strong></li>
<li>在 <strong>Repeater</strong> 标签中，点击 <strong>“Send”</strong> 按钮</li>
<li>查看响应，确认是成功的登录响应</li>
</ol>
<hr>
<h2 id="常见问题与解决方案"><a href="#常见问题与解决方案" class="headerlink" title="常见问题与解决方案"></a>常见问题与解决方案</h2><h3 id="问题-1：所有响应长度都相同"><a href="#问题-1：所有响应长度都相同" class="headerlink" title="问题 1：所有响应长度都相同"></a>问题 1：所有响应长度都相同</h3><p><strong>可能原因</strong>：</p>
<ul>
<li>Cookie 可能失效或不正确</li>
<li>需要包含有效的 PHPSESSID</li>
</ul>
<p><strong>解决方案</strong>：</p>
<ol>
<li>在浏览器中先正常访问 DVWA</li>
<li>确保已登录到 DVWA</li>
<li>重新捕获登录请求，确保包含有效的 Cookie</li>
<li>检查请求中的 <code>PHPSESSID</code> 和 <code>security=low</code> Cookie</li>
</ol>
<h3 id="问题-2：攻击速度非常慢"><a href="#问题-2：攻击速度非常慢" class="headerlink" title="问题 2：攻击速度非常慢"></a>问题 2：攻击速度非常慢</h3><p><strong>可能原因</strong>：</p>
<ul>
<li>使用的是 Burp Suite Community Edition（社区版）</li>
<li>社区版有速度限制，每个请求之间有延迟</li>
</ul>
<p><strong>解决方案</strong>：</p>
<ul>
<li>减少字典大小，使用更精确的字典</li>
<li>升级到 Burp Suite Professional</li>
<li>或使用其他工具如 Hydra、Medusa 进行暴力破解</li>
</ul>
<h3 id="问题-3：攻击无响应或报错"><a href="#问题-3：攻击无响应或报错" class="headerlink" title="问题 3：攻击无响应或报错"></a>问题 3：攻击无响应或报错</h3><p><strong>可能原因</strong>：</p>
<ul>
<li>网络连接问题</li>
<li>DVWA 服务器未运行</li>
<li>防火墙阻止</li>
</ul>
<p><strong>解决方案</strong>：</p>
<ol>
<li>在浏览器中测试是否能正常访问 DVWA</li>
<li>检查 Burp Suite 的代理设置</li>
<li>查看错误日志</li>
</ol>
<h3 id="问题-4：找不到成功的登录"><a href="#问题-4：找不到成功的登录" class="headerlink" title="问题 4：找不到成功的登录"></a>问题 4：找不到成功的登录</h3><p><strong>可能原因</strong>：</p>
<ul>
<li>字典中没有包含正确的用户名或密码</li>
<li>DVWA 的默认密码可能被修改</li>
</ul>
<p><strong>解决方案</strong>：</p>
<ol>
<li>尝试 DVWA 的标准凭证：<code>admin</code> &#x2F; <code>password</code></li>
<li>扩大字典范围</li>
<li>查看 DVWA 的文档确认默认凭证</li>
</ol>
<hr>
<h2 id="性能优化建议"><a href="#性能优化建议" class="headerlink" title="性能优化建议"></a>性能优化建议</h2><h3 id="1-使用更精确的字典"><a href="#1-使用更精确的字典" class="headerlink" title="1. 使用更精确的字典"></a>1. 使用更精确的字典</h3><p>不要使用几百万条的大字典，而是：</p>
<ul>
<li>针对目标系统选择合适的字典</li>
<li>使用常见密码 Top 100 或 Top 1000</li>
<li>DVWA 测试环境建议使用 10-20 个常见凭证即可</li>
</ul>
<h3 id="2-调整线程数（Professional-版本）"><a href="#2-调整线程数（Professional-版本）" class="headerlink" title="2. 调整线程数（Professional 版本）"></a>2. 调整线程数（Professional 版本）</h3><p>在 <strong>Intruder → Options</strong> 中：</p>
<ul>
<li>找到 <strong>Request Engine</strong> 部分</li>
<li>调整 <strong>Number of threads</strong>（线程数）</li>
<li>根据目标服务器性能调整，避免过载</li>
</ul>
<h3 id="3-设置合理的超时时间"><a href="#3-设置合理的超时时间" class="headerlink" title="3. 设置合理的超时时间"></a>3. 设置合理的超时时间</h3><p>在 <strong>Options</strong> 中设置：</p>
<ul>
<li><strong>Timeout</strong>：30 秒（根据网络情况调整）</li>
</ul>
<hr>
<h2 id="高级技巧"><a href="#高级技巧" class="headerlink" title="高级技巧"></a>高级技巧</h2><h3 id="1-使用-Pitchfork-模式进行定向测试"><a href="#1-使用-Pitchfork-模式进行定向测试" class="headerlink" title="1. 使用 Pitchfork 模式进行定向测试"></a>1. 使用 Pitchfork 模式进行定向测试</h3><p>如果你有一些已知的用户名-密码对：</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用户名列表：<span class="literal">admin</span>, user1, user2</span><br><span class="line">密码列表：  pass1, pass2, pass3</span><br></pre></td></tr></table></figure>

<p>Pitchfork 会测试：</p>
<ul>
<li>admin + pass1</li>
<li>user1 + pass2</li>
<li>user2 + pass3</li>
</ul>
<h3 id="2-添加延迟避免检测"><a href="#2-添加延迟避免检测" class="headerlink" title="2. 添加延迟避免检测"></a>2. 添加延迟避免检测</h3><p>在 <strong>Options → Request Engine</strong> 中：</p>
<ul>
<li>设置 <strong>Throttle between requests</strong></li>
<li>添加 1000-2000 毫秒延迟</li>
<li>模拟正常用户行为，避免被 WAF 检测</li>
</ul>
<h3 id="3-使用-Macros-处理动态-Token"><a href="#3-使用-Macros-处理动态-Token" class="headerlink" title="3. 使用 Macros 处理动态 Token"></a>3. 使用 Macros 处理动态 Token</h3><p>如果登录页面有 CSRF Token：</p>
<ol>
<li>在 <strong>Settings → Sessions</strong> 中配置 Macro</li>
<li>在每次请求前自动获取新的 Token</li>
<li>替换到攻击请求中</li>
</ol>
<hr>
<h2 id="防御建议"><a href="#防御建议" class="headerlink" title="防御建议"></a>防御建议</h2><p>作为渗透测试人员，了解防御措施同样重要：</p>
<h3 id="1-账户锁定策略"><a href="#1-账户锁定策略" class="headerlink" title="1. 账户锁定策略"></a>1. 账户锁定策略</h3><ul>
<li>失败 3-5 次后锁定账户</li>
<li>设置解锁时间（如 30 分钟）</li>
</ul>
<h3 id="2-验证码机制"><a href="#2-验证码机制" class="headerlink" title="2. 验证码机制"></a>2. 验证码机制</h3><ul>
<li>失败 2-3 次后要求验证码</li>
<li>使用 reCAPTCHA 或类似服务</li>
</ul>
<h3 id="3-速率限制"><a href="#3-速率限制" class="headerlink" title="3. 速率限制"></a>3. 速率限制</h3><ul>
<li>限制同一 IP 的请求频率</li>
<li>使用 IP 黑名单</li>
</ul>
<h3 id="4-强密码策略"><a href="#4-强密码策略" class="headerlink" title="4. 强密码策略"></a>4. 强密码策略</h3><ul>
<li>要求最小长度（如 12 位）</li>
<li>要求包含大小写字母、数字、特殊字符</li>
<li>定期更换密码</li>
</ul>
<h3 id="5-双因素认证（2FA）"><a href="#5-双因素认证（2FA）" class="headerlink" title="5. 双因素认证（2FA）"></a>5. 双因素认证（2FA）</h3><ul>
<li>即使密码被破解，仍需第二因素验证</li>
</ul>
<h3 id="6-日志和监控"><a href="#6-日志和监控" class="headerlink" title="6. 日志和监控"></a>6. 日志和监控</h3><ul>
<li>记录所有登录尝试</li>
<li>监控异常登录行为</li>
<li>及时告警</li>
</ul>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过本指南，你已经学会了：</p>
<ol>
<li>✓ 使用 Burp Suite 捕获登录请求</li>
<li>✓ 配置 Intruder 进行暴力破解攻击</li>
<li>✓ 设置攻击参数和字典</li>
<li>✓ 分析攻击结果识别成功的凭证</li>
<li>✓ 理解常见问题和解决方案</li>
<li>✓ 了解防御措施</li>
</ol>
<h2 id="免责声明"><a href="#免责声明" class="headerlink" title="免责声明"></a>免责声明</h2><p>本指南仅用于授权的安全测试和教育目的。未经授权对系统进行暴力破解攻击是违法行为。使用本指南中的技术时，请确保：</p>
<ul>
<li>你拥有目标系统的明确授权</li>
<li>在受控的测试环境中进行（如 DVWA）</li>
<li>遵守所有相关法律法规</li>
</ul>
<hr>
<h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.dvwa.co.uk/">DVWA 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://portswigger.net/burp/documentation">Burp Suite 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://owasp.org/www-project-web-security-testing-guide/">OWASP Testing Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/danielmiessler/SecLists">SecLists 密码字典</a></li>
</ul>
<hr>
<p><strong>最后更新时间</strong>：2025-11-19<br><strong>文档版本</strong>：1.0</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2025/11/19/%E8%A7%A3%E5%86%B3Burp_Suite%E6%97%A0%E6%B3%95%E6%8B%A6%E6%88%AAlocalhost%E8%AF%B7%E6%B1%82%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/11/19/%E8%A7%A3%E5%86%B3Burp_Suite%E6%97%A0%E6%B3%95%E6%8B%A6%E6%88%AAlocalhost%E8%AF%B7%E6%B1%82%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">解决 Burp Suite 无法拦截 localhost 请求的问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-11-19 21:05:02 / Modified: 21:05:25" itemprop="dateCreated datePublished" datetime="2025-11-19T21:05:02+08:00">2025-11-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dvwa%E9%9D%B6%E5%9C%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">dvwa靶场学习笔记</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>7.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>7 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="解决-Burp-Suite-无法拦截-localhost-请求的问题"><a href="#解决-Burp-Suite-无法拦截-localhost-请求的问题" class="headerlink" title="解决 Burp Suite 无法拦截 localhost 请求的问题"></a>解决 Burp Suite 无法拦截 localhost 请求的问题</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>在使用 Burp Suite 进行 DVWA 渗透测试时，遇到以下问题：</p>
<ul>
<li>浏览器访问 <code>http://localhost/dvwa</code> 时，Burp Suite 无法拦截请求</li>
<li>HTTP History 中看不到任何 localhost 的请求记录</li>
<li>Target → Site map 中可能显示 localhost，但没有具体路径</li>
<li>访问其他外部网站（如 <code>http://example.com</code>）可以正常拦截</li>
</ul>
<h2 id="根本原因"><a href="#根本原因" class="headerlink" title="根本原因"></a>根本原因</h2><p><strong>Chrome&#x2F;Edge 等浏览器有内置的安全机制</strong>：即使配置了代理插件（如 SwitchyOmega），默认情况下也会<strong>自动绕过对 <code>localhost</code> 和 <code>127.0.0.1</code> 的代理</strong>。</p>
<p>这是浏览器的默认行为，用于优化本地开发环境的性能，但会导致无法通过 Burp Suite 拦截本地请求。</p>
<hr>
<h2 id="完整解决方案"><a href="#完整解决方案" class="headerlink" title="完整解决方案"></a>完整解决方案</h2><p>需要<strong>同时应用以下三个方案</strong>才能彻底解决问题：</p>
<h3 id="方案-A：修改-Chrome-启动参数（禁用-localhost-代理绕过）"><a href="#方案-A：修改-Chrome-启动参数（禁用-localhost-代理绕过）" class="headerlink" title="方案 A：修改 Chrome 启动参数（禁用 localhost 代理绕过）"></a>方案 A：修改 Chrome 启动参数（禁用 localhost 代理绕过）</h3><h3 id="方案-B：配置-Hosts-文件使用自定义域名"><a href="#方案-B：配置-Hosts-文件使用自定义域名" class="headerlink" title="方案 B：配置 Hosts 文件使用自定义域名"></a>方案 B：配置 Hosts 文件使用自定义域名</h3><h3 id="方案-C：正确配置-Burp-Suite-拦截规则"><a href="#方案-C：正确配置-Burp-Suite-拦截规则" class="headerlink" title="方案 C：正确配置 Burp Suite 拦截规则"></a>方案 C：正确配置 Burp Suite 拦截规则</h3><hr>
<h2 id="方案-A：修改-Chrome-启动参数"><a href="#方案-A：修改-Chrome-启动参数" class="headerlink" title="方案 A：修改 Chrome 启动参数"></a>方案 A：修改 Chrome 启动参数</h2><h3 id="步骤-1：关闭所有-Chrome-进程"><a href="#步骤-1：关闭所有-Chrome-进程" class="headerlink" title="步骤 1：关闭所有 Chrome 进程"></a>步骤 1：关闭所有 Chrome 进程</h3><ol>
<li>完全关闭 Chrome 浏览器（点击右上角的 X）</li>
<li>打开任务管理器（<code>Ctrl + Shift + Esc</code>）</li>
<li>查找所有 <code>chrome.exe</code> 进程</li>
<li>右键点击每个进程，选择 <strong>“结束任务”</strong></li>
<li>确保没有任何 Chrome 后台进程在运行</li>
</ol>
<h3 id="步骤-2：创建-Chrome-快捷方式"><a href="#步骤-2：创建-Chrome-快捷方式" class="headerlink" title="步骤 2：创建 Chrome 快捷方式"></a>步骤 2：创建 Chrome 快捷方式</h3><ol>
<li><p>找到 Chrome 的安装位置，通常是：</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="string">\Program</span> Files<span class="string">\Google\Chrome\Application\chrome.exe</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="string">\Program</span> Files (x86)<span class="string">\Google\Chrome\Application\chrome.exe</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>右键点击 <code>chrome.exe</code>，选择 <strong>“创建快捷方式”</strong></p>
</li>
<li><p>将快捷方式移动到桌面或其他方便访问的位置</p>
</li>
</ol>
<h3 id="步骤-3：修改快捷方式属性"><a href="#步骤-3：修改快捷方式属性" class="headerlink" title="步骤 3：修改快捷方式属性"></a>步骤 3：修改快捷方式属性</h3><ol>
<li><p>右键点击刚创建的快捷方式</p>
</li>
<li><p>选择 <strong>“属性”</strong></p>
</li>
<li><p>在 <strong>“目标”</strong> 字段中，找到现有的路径，例如：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;C:\Program Files\Google\Chrome\Application\chrome.exe&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在路径<strong>后面</strong>添加以下参数（注意有空格）：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">--proxy-bypass-list</span>=<span class="string">&quot;&lt;-loopback&gt;&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>完整的目标应该类似：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;C:\Program Files\Google\Chrome\Application\chrome.exe&quot;</span> --proxy-bypass-list<span class="operator">=</span><span class="string">&quot;&lt;-loopback&gt;&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>点击 **”应用”**，然后点击 <strong>“确定”</strong></p>
</li>
</ol>
<h3 id="步骤-4：通过新快捷方式启动-Chrome"><a href="#步骤-4：通过新快捷方式启动-Chrome" class="headerlink" title="步骤 4：通过新快捷方式启动 Chrome"></a>步骤 4：通过新快捷方式启动 Chrome</h3><ol>
<li><strong>重要</strong>：不要通过任务栏或其他方式启动 Chrome</li>
<li>只能通过刚才修改的快捷方式启动</li>
<li>启动后，Chrome 将不再绕过 localhost 的代理</li>
</ol>
<h3 id="验证方法"><a href="#验证方法" class="headerlink" title="验证方法"></a>验证方法</h3><p>启动 Chrome 后，在地址栏输入：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome:<span class="regexp">//</span>version</span><br></pre></td></tr></table></figure>

<p>在 <strong>“命令行”</strong> 部分，应该能看到 <code>--proxy-bypass-list=&quot;&lt;-loopback&gt;&quot;</code> 参数。</p>
<hr>
<h2 id="方案-B：配置-Hosts-文件使用自定义域名-1"><a href="#方案-B：配置-Hosts-文件使用自定义域名-1" class="headerlink" title="方案 B：配置 Hosts 文件使用自定义域名"></a>方案 B：配置 Hosts 文件使用自定义域名</h2><h3 id="为什么需要这个方案"><a href="#为什么需要这个方案" class="headerlink" title="为什么需要这个方案"></a>为什么需要这个方案</h3><p>即使禁用了浏览器的代理绕过，某些情况下 <code>localhost</code> 仍然可能有问题。使用自定义域名可以彻底避免这个问题。</p>
<h3 id="步骤-1：编辑-Hosts-文件"><a href="#步骤-1：编辑-Hosts-文件" class="headerlink" title="步骤 1：编辑 Hosts 文件"></a>步骤 1：编辑 Hosts 文件</h3><ol>
<li><p>以<strong>管理员身份</strong>打开记事本：</p>
<ul>
<li>点击开始菜单</li>
<li>搜索 “记事本”</li>
<li>右键点击 “记事本”</li>
<li>选择 <strong>“以管理员身份运行”</strong></li>
</ul>
</li>
<li><p>在记事本中，点击 <strong>“文件” → “打开”</strong></p>
</li>
<li><p>导航到以下路径：</p>
<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">C</span>:\Windows\System32\drivers\etc</span><br></pre></td></tr></table></figure>
</li>
<li><p>在文件类型下拉菜单中，选择 <strong>“所有文件 (<em>.</em>)”</strong></p>
</li>
<li><p>找到并打开 <strong>hosts</strong> 文件（没有扩展名）</p>
</li>
</ol>
<h3 id="步骤-2：添加自定义域名映射"><a href="#步骤-2：添加自定义域名映射" class="headerlink" title="步骤 2：添加自定义域名映射"></a>步骤 2：添加自定义域名映射</h3><p>在 hosts 文件的<strong>最后一行</strong>添加：</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0.0.1</span>  dvwa.local</span><br></pre></td></tr></table></figure>

<p>完整的 hosts 文件内容示例：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Copyright (c) 1993-2009 Microsoft Corp.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This is a sample HOSTS file used by Microsoft TCP/IP for Windows.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This file contains the mappings of IP addresses to host names. Each</span></span><br><span class="line"><span class="comment"># entry should be kept on an individual line. The IP address should</span></span><br><span class="line"><span class="comment"># be placed in the first column followed by the corresponding host name.</span></span><br><span class="line"><span class="comment"># The IP address and the host name should be separated by at least one</span></span><br><span class="line"><span class="comment"># space.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Additionally, comments (such as these) may be inserted on individual</span></span><br><span class="line"><span class="comment"># lines or following the machine name denoted by a &#x27;#&#x27; symbol.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For example:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#      102.54.94.97     rhino.acme.com          # source server</span></span><br><span class="line"><span class="comment">#       38.25.63.10     x.acme.com              # x client host</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># localhost name resolution is handled within DNS itself.</span></span><br><span class="line"><span class="comment">#	127.0.0.1       localhost</span></span><br><span class="line"><span class="comment">#	::1             localhost</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>  dvwa.local</span><br></pre></td></tr></table></figure>

<h3 id="步骤-3：保存文件"><a href="#步骤-3：保存文件" class="headerlink" title="步骤 3：保存文件"></a>步骤 3：保存文件</h3><ol>
<li>点击 <strong>“文件” → “保存”</strong></li>
<li>关闭记事本</li>
</ol>
<h3 id="步骤-4：刷新-DNS-缓存"><a href="#步骤-4：刷新-DNS-缓存" class="headerlink" title="步骤 4：刷新 DNS 缓存"></a>步骤 4：刷新 DNS 缓存</h3><p>打开命令提示符（<code>Win + R</code>，输入 <code>cmd</code>），执行：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ipconfig</span> /flushdns</span><br></pre></td></tr></table></figure>

<p>你应该看到：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Windows<span class="built_in"> IP </span>配置</span><br><span class="line">已成功刷新<span class="built_in"> DNS </span>解析缓存。</span><br></pre></td></tr></table></figure>

<h3 id="步骤-5：验证配置"><a href="#步骤-5：验证配置" class="headerlink" title="步骤 5：验证配置"></a>步骤 5：验证配置</h3><p>在命令提示符中执行：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ping</span> dvwa.local</span><br></pre></td></tr></table></figure>

<p>应该显示：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正在<span class="built_in"> Ping </span>dvwa.local [127.0.0.1] 具有 32 字节的数据:</span><br><span class="line">来自 127.0.0.1 的回复: 字节=32 时间&lt;1ms <span class="attribute">TTL</span>=128</span><br></pre></td></tr></table></figure>

<h3 id="步骤-6：修改-DVWA-访问地址"><a href="#步骤-6：修改-DVWA-访问地址" class="headerlink" title="步骤 6：修改 DVWA 访问地址"></a>步骤 6：修改 DVWA 访问地址</h3><p>从现在开始，不要访问：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>localhost/dvwa</span><br></pre></td></tr></table></figure>

<p>而是访问：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>dvwa.local/dvwa</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="方案-C：正确配置-Burp-Suite-拦截规则-1"><a href="#方案-C：正确配置-Burp-Suite-拦截规则-1" class="headerlink" title="方案 C：正确配置 Burp Suite 拦截规则"></a>方案 C：正确配置 Burp Suite 拦截规则</h2><h3 id="问题说明"><a href="#问题说明" class="headerlink" title="问题说明"></a>问题说明</h3><p>即使浏览器代理配置正确，如果 Burp Suite 的拦截规则配置不当，仍然无法拦截请求。</p>
<h3 id="关键配置点"><a href="#关键配置点" class="headerlink" title="关键配置点"></a>关键配置点</h3><h4 id="❌-错误配置"><a href="#❌-错误配置" class="headerlink" title="❌ 错误配置"></a>❌ 错误配置</h4><p>如果勾选了 **”And URL is in target scope”**，Burp 只会拦截在 Target Scope 中的 URL。如果 <code>dvwa.local</code> 不在 Scope 中，请求将不会被拦截。</p>
<h4 id="✅-正确配置"><a href="#✅-正确配置" class="headerlink" title="✅ 正确配置"></a>✅ 正确配置</h4><h3 id="步骤-1：进入-Proxy-Settings"><a href="#步骤-1：进入-Proxy-Settings" class="headerlink" title="步骤 1：进入 Proxy Settings"></a>步骤 1：进入 Proxy Settings</h3><ol>
<li>在 Burp Suite 中，点击 <strong>Settings</strong>（或旧版本中的齿轮图标）</li>
<li>在左侧导航中，选择 <strong>Tools → Proxy</strong></li>
<li>找到 <strong>Request interception rules</strong> 部分</li>
</ol>
<h3 id="步骤-2：配置拦截规则"><a href="#步骤-2：配置拦截规则" class="headerlink" title="步骤 2：配置拦截规则"></a>步骤 2：配置拦截规则</h3><p><strong>必须勾选</strong>：</p>
<ul>
<li>✅ <strong>Intercept requests based on the following rules</strong><ul>
<li>这个选项必须启用，否则拦截功能不工作</li>
</ul>
</li>
</ul>
<p><strong>必须取消勾选</strong>：</p>
<ul>
<li>❌ <strong>And URL is in target scope</strong><ul>
<li>取消这个选项，允许拦截所有请求，不受 Scope 限制</li>
</ul>
</li>
</ul>
<p><strong>可选勾选</strong>（推荐保留）：</p>
<ul>
<li><p>✅ <strong>Or File extension Does not match</strong></p>
<ul>
<li>条件：<code>^gif$|^jpg$|^png$|^css$|^js$|^ico$...</code></li>
<li>说明：不拦截图片、CSS、JS 等静态资源</li>
</ul>
</li>
<li><p>✅ <strong>Or Request Contains parameters</strong></p>
<ul>
<li>说明：拦截包含参数的请求（如登录请求）</li>
</ul>
</li>
<li><p>✅ <strong>Or HTTP method Does not match</strong></p>
<ul>
<li>条件：<code>get|post</code></li>
<li>说明：只拦截 GET 和 POST 请求</li>
</ul>
</li>
</ul>
<h3 id="步骤-3：推荐的拦截规则配置"><a href="#步骤-3：推荐的拦截规则配置" class="headerlink" title="步骤 3：推荐的拦截规则配置"></a>步骤 3：推荐的拦截规则配置</h3><p>最终的拦截规则配置应该如下：</p>
<table>
<thead>
<tr>
<th>Enabled</th>
<th>Operator</th>
<th>Match type</th>
<th>Relationship</th>
<th>Condition</th>
</tr>
</thead>
<tbody><tr>
<td>✅</td>
<td>Or</td>
<td>File extension</td>
<td>Does not match</td>
<td>&#96;^gif$</td>
</tr>
<tr>
<td>✅</td>
<td>Or</td>
<td>Request</td>
<td>Contains parameters</td>
<td>-</td>
</tr>
<tr>
<td>✅</td>
<td>Or</td>
<td>HTTP method</td>
<td>Does not match</td>
<td>&#96;get</td>
</tr>
<tr>
<td>❌</td>
<td><del>And</del></td>
<td><del>URL</del></td>
<td><del>Is in target scope</del></td>
<td><del>（取消勾选）</del></td>
</tr>
</tbody></table>
<h3 id="步骤-4：配置-Response-Interception-Rules"><a href="#步骤-4：配置-Response-Interception-Rules" class="headerlink" title="步骤 4：配置 Response Interception Rules"></a>步骤 4：配置 Response Interception Rules</h3><p>在 <strong>Response interception rules</strong> 部分，类似配置：</p>
<p><strong>必须勾选</strong>：</p>
<ul>
<li>✅ <strong>Intercept responses based on the following rules</strong></li>
</ul>
<p><strong>推荐配置</strong>：</p>
<ul>
<li>✅ <strong>Or Content type header Matches</strong> → <code>text</code></li>
<li>✅ <strong>And Request Was intercepted</strong></li>
<li>✅ <strong>And Status code Does not match</strong> → <code>^304$</code></li>
<li>❌ <strong>And URL is in target scope</strong>（取消勾选）</li>
</ul>
<p><strong>配置完成后proxy配置是这样的:</strong><br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/proxy1.png"><br>—分割线—<br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/proxy2.png"><br>—分割线—<br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/proxy3.png"><br>—分割线—<br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/proxy4.png"><br>—分割线—<br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/proxy5.png"></p>
<h3 id="步骤-5：浏览器配置如下"><a href="#步骤-5：浏览器配置如下" class="headerlink" title="步骤 5：浏览器配置如下:"></a>步骤 5：浏览器配置如下:</h3><p>1.代理端口号需要和proxy配置中的Proxy listeners一致<br><br>2.不代理的地址列表不能有localost或者127.0.0.1<br><br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE.png"></p>
<h3 id="步骤-6：Proxy标签HTTP-history的filter配置"><a href="#步骤-6：Proxy标签HTTP-history的filter配置" class="headerlink" title="步骤 6：Proxy标签HTTP history的filter配置:"></a>步骤 6：Proxy标签HTTP history的filter配置:</h3><p>1.需要勾选上HTML<br><img src="https://cxy-1300765640.cos.ap-nanjing.myqcloud.com/hexo_blog/proxy_http_history.png"></p>
<h3 id="步骤-7：保存并测试"><a href="#步骤-7：保存并测试" class="headerlink" title="步骤 7：保存并测试"></a>步骤 7：保存并测试</h3><ol>
<li>配置完成后，关闭 Settings 窗口</li>
<li>确保 <strong>Proxy → Intercept</strong> 显示 <strong>“Intercept is on”</strong></li>
<li>在浏览器中访问 <code>http://dvwa.local/dvwa</code></li>
<li>应该能在 Burp Suite 中看到被拦截的请求</li>
</ol>
<hr>
<h2 id="完整验证流程"><a href="#完整验证流程" class="headerlink" title="完整验证流程"></a>完整验证流程</h2><h3 id="第一步：验证基础配置"><a href="#第一步：验证基础配置" class="headerlink" title="第一步：验证基础配置"></a>第一步：验证基础配置</h3><ol>
<li>✅ Burp Suite Proxy 监听在 <code>127.0.0.1:8082</code></li>
<li>✅ SwitchyOmega 配置代理为 <code>localhost:8082</code></li>
<li>✅ 浏览器当前使用 “burp suite” 情景模式</li>
</ol>
<h3 id="第二步：验证-Chrome-启动参数"><a href="#第二步：验证-Chrome-启动参数" class="headerlink" title="第二步：验证 Chrome 启动参数"></a>第二步：验证 Chrome 启动参数</h3><ol>
<li>通过修改后的快捷方式启动 Chrome</li>
<li>访问 <code>chrome://version</code></li>
<li>确认命令行中包含 <code>--proxy-bypass-list=&quot;&lt;-loopback&gt;&quot;</code></li>
</ol>
<h3 id="第三步：验证-Hosts-配置"><a href="#第三步：验证-Hosts-配置" class="headerlink" title="第三步：验证 Hosts 配置"></a>第三步：验证 Hosts 配置</h3><ol>
<li>在命令提示符中执行：<code>ping dvwa.local</code></li>
<li>确认解析到 <code>127.0.0.1</code></li>
</ol>
<h3 id="第四步：验证-Burp-代理工作"><a href="#第四步：验证-Burp-代理工作" class="headerlink" title="第四步：验证 Burp 代理工作"></a>第四步：验证 Burp 代理工作</h3><ol>
<li>在浏览器中访问 <code>http://burp</code></li>
<li>应该看到 “Welcome to Burp Suite Professional” 页面</li>
<li>如果能看到，说明代理正常工作</li>
</ol>
<h3 id="第五步：验证拦截功能"><a href="#第五步：验证拦截功能" class="headerlink" title="第五步：验证拦截功能"></a>第五步：验证拦截功能</h3><ol>
<li>在 Burp Suite 中，确保 <strong>Intercept is on</strong></li>
<li>在浏览器中访问 <code>http://dvwa.local/dvwa</code></li>
<li>应该在 Burp Suite 的 Intercept 标签中看到请求被拦截</li>
</ol>
<h3 id="第六步：完整测试"><a href="#第六步：完整测试" class="headerlink" title="第六步：完整测试"></a>第六步：完整测试</h3><ol>
<li>在 DVWA 登录页面输入用户名和密码</li>
<li>点击 Login 按钮</li>
<li>在 Burp Suite 中应该能看到：<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/dvwa/vulnerabilities/brute/?username=xxx&amp;password=xxx&amp;Login=Login</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>dvwa.local</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="故障排查"><a href="#故障排查" class="headerlink" title="故障排查"></a>故障排查</h2><h3 id="问题-1：Chrome-启动参数不生效"><a href="#问题-1：Chrome-启动参数不生效" class="headerlink" title="问题 1：Chrome 启动参数不生效"></a>问题 1：Chrome 启动参数不生效</h3><p><strong>症状</strong>：</p>
<ul>
<li>在 <code>chrome://version</code> 中看不到 <code>--proxy-bypass-list</code> 参数</li>
</ul>
<p><strong>原因</strong>：</p>
<ul>
<li>可能有其他 Chrome 进程在后台运行</li>
<li>没有通过修改的快捷方式启动</li>
</ul>
<p><strong>解决方案</strong>：</p>
<ol>
<li>打开任务管理器，结束所有 <code>chrome.exe</code> 进程</li>
<li>确保<strong>只通过修改的快捷方式</strong>启动 Chrome</li>
<li>不要点击任务栏上的 Chrome 图标</li>
</ol>
<h3 id="问题-2：Hosts-文件修改不生效"><a href="#问题-2：Hosts-文件修改不生效" class="headerlink" title="问题 2：Hosts 文件修改不生效"></a>问题 2：Hosts 文件修改不生效</h3><p><strong>症状</strong>：</p>
<ul>
<li><code>ping dvwa.local</code> 无法解析或解析错误</li>
</ul>
<p><strong>原因</strong>：</p>
<ul>
<li>Hosts 文件格式错误（多余的空格、Tab 等）</li>
<li>DNS 缓存未刷新</li>
<li>没有管理员权限保存</li>
</ul>
<p><strong>解决方案</strong>：</p>
<ol>
<li><p>确保 hosts 文件格式正确：</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0.0.1</span>  dvwa.local</span><br></pre></td></tr></table></figure>
<p>（IP 和域名之间至少一个空格）</p>
</li>
<li><p>执行：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ipconfig</span> /flushdns</span><br></pre></td></tr></table></figure>
</li>
<li><p>以管理员身份重新编辑和保存 hosts 文件</p>
</li>
</ol>
<h3 id="问题-3：Burp-仍然拦截不到请求"><a href="#问题-3：Burp-仍然拦截不到请求" class="headerlink" title="问题 3：Burp 仍然拦截不到请求"></a>问题 3：Burp 仍然拦截不到请求</h3><p><strong>症状</strong>：</p>
<ul>
<li>访问 <code>http://burp</code> 可以看到欢迎页面</li>
<li>但访问 <code>http://dvwa.local/dvwa</code> 拦截不到</li>
</ul>
<p><strong>可能原因与解决方案</strong>：</p>
<h4 id="原因-A：Intercept-规则配置错误"><a href="#原因-A：Intercept-规则配置错误" class="headerlink" title="原因 A：Intercept 规则配置错误"></a>原因 A：Intercept 规则配置错误</h4><p><strong>检查</strong>：</p>
<ol>
<li>进入 <strong>Settings → Tools → Proxy</strong></li>
<li>找到 <strong>Request interception rules</strong></li>
<li>确认 ✅ <strong>“Intercept requests based on the following rules”</strong> 已勾选</li>
<li>确认 ❌ <strong>“And URL is in target scope”</strong> 未勾选</li>
</ol>
<h4 id="原因-B：浏览器缓存问题"><a href="#原因-B：浏览器缓存问题" class="headerlink" title="原因 B：浏览器缓存问题"></a>原因 B：浏览器缓存问题</h4><p><strong>解决</strong>：</p>
<ol>
<li>清除浏览器缓存（<code>Ctrl + Shift + Delete</code>）</li>
<li>重启浏览器</li>
<li>再次测试</li>
</ol>
<h4 id="原因-C：HTTPS-重定向"><a href="#原因-C：HTTPS-重定向" class="headerlink" title="原因 C：HTTPS 重定向"></a>原因 C：HTTPS 重定向</h4><p><strong>解决</strong>：</p>
<ul>
<li>确保访问的是 <code>http://dvwa.local</code>（HTTP，不是 HTTPS）</li>
<li>如果自动跳转到 HTTPS，需要配置 Burp 的 HTTPS 拦截</li>
</ul>
<h3 id="问题-4：dvwa-local-无法访问"><a href="#问题-4：dvwa-local-无法访问" class="headerlink" title="问题 4：dvwa.local 无法访问"></a>问题 4：dvwa.local 无法访问</h3><p><strong>症状</strong>：</p>
<ul>
<li>浏览器显示 “无法访问此网站” 或 “ERR_CONNECTION_REFUSED”</li>
</ul>
<p><strong>原因</strong>：</p>
<ul>
<li>DVWA 服务器未启动</li>
<li>Apache&#x2F;Nginx 没有配置虚拟主机</li>
</ul>
<p><strong>解决方案</strong>：</p>
<h4 id="方案-1：继续使用-127-0-0-1"><a href="#方案-1：继续使用-127-0-0-1" class="headerlink" title="方案 1：继续使用 127.0.0.1"></a>方案 1：继续使用 127.0.0.1</h4><p>如果你不想配置虚拟主机，可以直接访问：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>/dvwa</span><br></pre></td></tr></table></figure>

<p>配合 Chrome 启动参数，<code>127.0.0.1</code> 也不会被绕过代理。</p>
<h4 id="方案-2：配置-Apache-虚拟主机（可选）"><a href="#方案-2：配置-Apache-虚拟主机（可选）" class="headerlink" title="方案 2：配置 Apache 虚拟主机（可选）"></a>方案 2：配置 Apache 虚拟主机（可选）</h4><ol>
<li><p>编辑 Apache 配置文件（如 <code>httpd.conf</code> 或 <code>httpd-vhosts.conf</code>）</p>
</li>
<li><p>添加虚拟主机配置：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *<span class="number">:80</span>&gt;</span></span><br><span class="line">    <span class="attribute">ServerName</span> dvwa.local</span><br><span class="line">    <span class="attribute">DocumentRoot</span> <span class="string">&quot;C:/xampp/htdocs&quot;</span></span><br><span class="line">    <span class="section">&lt;Directory <span class="string">&quot;C:/xampp/htdocs&quot;</span>&gt;</span></span><br><span class="line">        <span class="attribute">Options</span> Indexes FollowSymLinks</span><br><span class="line">        <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">        <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重启 Apache 服务</p>
</li>
</ol>
<hr>
<h2 id="最佳实践建议"><a href="#最佳实践建议" class="headerlink" title="最佳实践建议"></a>最佳实践建议</h2><h3 id="1-同时使用两个方案"><a href="#1-同时使用两个方案" class="headerlink" title="1. 同时使用两个方案"></a>1. 同时使用两个方案</h3><p><strong>推荐组合</strong>：</p>
<ul>
<li>✅ Chrome 启动参数（<code>--proxy-bypass-list=&quot;&lt;-loopback&gt;&quot;</code>）</li>
<li>✅ Hosts 文件配置（<code>dvwa.local</code>）</li>
<li>✅ Burp 拦截规则配置（取消勾选 Scope 限制）</li>
</ul>
<p>这样可以确保：</p>
<ul>
<li>Chrome 不会绕过本地代理</li>
<li>使用自定义域名避免 localhost 特殊处理</li>
<li>Burp 能拦截所有请求</li>
</ul>
<h3 id="2-创建专用的-Chrome-配置文件"><a href="#2-创建专用的-Chrome-配置文件" class="headerlink" title="2. 创建专用的 Chrome 配置文件"></a>2. 创建专用的 Chrome 配置文件</h3><p>为渗透测试创建单独的 Chrome 配置文件：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;C:\Program Files\Google\Chrome\Application\chrome.exe&quot; --user-data-<span class="built_in">dir</span>=&quot;C:\ChromePentest&quot; --proxy-bypass-list=&quot;&lt;-loopback&gt;&quot;</span><br></pre></td></tr></table></figure>

<p>这样可以避免影响日常使用的 Chrome 配置。</p>
<h3 id="3-使用-Firefox-替代方案"><a href="#3-使用-Firefox-替代方案" class="headerlink" title="3. 使用 Firefox 替代方案"></a>3. 使用 Firefox 替代方案</h3><p>如果 Chrome 配置太麻烦，可以使用 Firefox：</p>
<ul>
<li>Firefox 对代理的支持更好</li>
<li>不会自动绕过 localhost</li>
<li>配置相对简单</li>
</ul>
<h3 id="4-固定-Burp-监听端口"><a href="#4-固定-Burp-监听端口" class="headerlink" title="4. 固定 Burp 监听端口"></a>4. 固定 Burp 监听端口</h3><p>统一使用固定端口（如 8082），避免频繁修改配置。</p>
<hr>
<h2 id="配置检查清单"><a href="#配置检查清单" class="headerlink" title="配置检查清单"></a>配置检查清单</h2><p>在开始渗透测试前，确保以下所有项都已正确配置：</p>
<h3 id="Chrome-配置"><a href="#Chrome-配置" class="headerlink" title="Chrome 配置"></a>Chrome 配置</h3><ul>
<li><input disabled="" type="checkbox"> 已创建带启动参数的快捷方式</li>
<li><input disabled="" type="checkbox"> 快捷方式包含 <code>--proxy-bypass-list=&quot;&lt;-loopback&gt;&quot;</code></li>
<li><input disabled="" type="checkbox"> 通过该快捷方式启动 Chrome</li>
<li><input disabled="" type="checkbox"> 在 <code>chrome://version</code> 中确认参数生效</li>
</ul>
<h3 id="Hosts-配置"><a href="#Hosts-配置" class="headerlink" title="Hosts 配置"></a>Hosts 配置</h3><ul>
<li><input disabled="" type="checkbox"> 以管理员身份编辑 hosts 文件</li>
<li><input disabled="" type="checkbox"> 添加 <code>127.0.0.1  dvwa.local</code> 条目</li>
<li><input disabled="" type="checkbox"> 保存文件</li>
<li><input disabled="" type="checkbox"> 执行 <code>ipconfig /flushdns</code></li>
<li><input disabled="" type="checkbox"> 用 <code>ping dvwa.local</code> 验证</li>
</ul>
<h3 id="Burp-Suite-配置"><a href="#Burp-Suite-配置" class="headerlink" title="Burp Suite 配置"></a>Burp Suite 配置</h3><ul>
<li><input disabled="" type="checkbox"> Proxy Listener 运行在 127.0.0.1:8082</li>
<li><input disabled="" type="checkbox"> ✅ “Intercept requests based on the following rules” 已勾选</li>
<li><input disabled="" type="checkbox"> ❌ “And URL is in target scope” 未勾选</li>
<li><input disabled="" type="checkbox"> Intercept is on（拦截已开启）</li>
</ul>
<h3 id="SwitchyOmega-配置"><a href="#SwitchyOmega-配置" class="headerlink" title="SwitchyOmega 配置"></a>SwitchyOmega 配置</h3><ul>
<li><input disabled="" type="checkbox"> 代理服务器：localhost:8082</li>
<li><input disabled="" type="checkbox"> 不代理列表只包含 <code>[::1]</code></li>
<li><input disabled="" type="checkbox"> 当前情景模式：burp suite</li>
</ul>
<h3 id="验证测试"><a href="#验证测试" class="headerlink" title="验证测试"></a>验证测试</h3><ul>
<li><input disabled="" type="checkbox"> 访问 <code>http://burp</code> 能看到欢迎页面</li>
<li><input disabled="" type="checkbox"> 访问 <code>http://dvwa.local/dvwa</code> 能看到 DVWA</li>
<li><input disabled="" type="checkbox"> 登录操作能被 Burp 拦截</li>
<li><input disabled="" type="checkbox"> HTTP History 中能看到请求记录</li>
</ul>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>解决 Burp Suite 无法拦截 localhost 请求的<strong>完整方案</strong>包括：</p>
<ol>
<li><p><strong>修改 Chrome 启动参数</strong></p>
<ul>
<li>添加 <code>--proxy-bypass-list=&quot;&lt;-loopback&gt;&quot;</code> 参数</li>
<li>禁用浏览器对 localhost 的代理绕过</li>
</ul>
</li>
<li><p><strong>配置 Hosts 文件</strong></p>
<ul>
<li>添加 <code>127.0.0.1  dvwa.local</code> 映射</li>
<li>使用自定义域名访问 DVWA</li>
</ul>
</li>
<li><p><strong>正确配置 Burp 拦截规则</strong></p>
<ul>
<li>勾选 “Intercept requests based on the following rules”</li>
<li><strong>取消勾选</strong> “And URL is in target scope”</li>
<li>可选勾选 “Or HTTP method Does not match”</li>
</ul>
</li>
</ol>
<p>这三个方案<strong>必须同时应用</strong>才能彻底解决问题。</p>
<hr>
<h2 id="附录：其他浏览器配置"><a href="#附录：其他浏览器配置" class="headerlink" title="附录：其他浏览器配置"></a>附录：其他浏览器配置</h2><h3 id="Microsoft-Edge"><a href="#Microsoft-Edge" class="headerlink" title="Microsoft Edge"></a>Microsoft Edge</h3><p>Edge 基于 Chromium，配置方法与 Chrome 相同：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe&quot;</span> --proxy-bypass-list<span class="operator">=</span><span class="string">&quot;&lt;-loopback&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h3><p>Firefox 对代理支持较好，通常不需要特殊配置：</p>
<ol>
<li>打开 Firefox 设置</li>
<li>搜索 “代理”</li>
<li>选择 “手动代理配置”</li>
<li>HTTP 代理：<code>127.0.0.1</code>，端口：<code>8082</code></li>
<li>勾选 “也将此代理用于 HTTPS”</li>
<li><strong>不要</strong>在 “不使用代理” 中添加 localhost</li>
</ol>
<hr>
<p><strong>文档版本</strong>：1.0<br><strong>最后更新</strong>：2025-11-19<br><strong>适用环境</strong>：Windows 10&#x2F;11 + Chrome&#x2F;Edge + Burp Suite Professional&#x2F;Community</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2023/06/12/%E6%90%AD%E5%BB%BAopenvpn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/12/%E6%90%AD%E5%BB%BAopenvpn/" class="post-title-link" itemprop="url">搭建openvpn</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-06-12 01:30:31 / Modified: 01:47:33" itemprop="dateCreated datePublished" datetime="2023-06-12T01:30:31+08:00">2023-06-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>2.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>3 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>购买腾讯云服务器：<a target="_blank" rel="noopener" href="https://blog.csdn.net/SoloVersion/article/details/123854852?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168589280616800185825175%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=168589280616800185825175&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-123854852-null-null.142%5Ev88%5Einsert_down28v1,239%5Ev2%5Einsert_chatgpt&utm_term=XShell&spm=1018.2226.3001.4187">服务器</a><br><br>xshell服务器连接工具教程：<a target="_blank" rel="noopener" href="https://www.puttylink.com/">xshell</a><br><br>搭建vpn的教程参考：<br><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/630327056">搭建vpn</a><br><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/rockage/article/details/127190263">一看就懂的保姆级教程：openvn设置 （亲测通过）</a><br><br><a target="_blank" rel="noopener" href="http://www.itca.cc/VPN%E6%90%AD%E5%BB%BA/openvpn.html">在 Windows Server2019 上搭建 OpenVPN 服务端</a><br><br>（参考了很多资料，大概有十几篇，大多都没有保存有网址，只记下这三个，并非有意不列出全部出处，如有侵权，麻烦告知，抱歉抱歉，不到最后我也不知道参考的是否有用，网页太多就关掉了许多）<br><br>搭建vpn的时候参考上面链接的教程就行<br><br>其中有一个坑，客户端的client.ovpn的配置中，<code>remote 43.156.116.201 1194 #这里需要写的是openvpn服务器IP地址端口号，也就是购买的服务器的公网ip</code><br></p>
<p>环境：<br>服务器：腾讯云服务器<br>客户端：在本机windows10安装openvpn客户端</p>
<p>其中五个重要的配置如下：<br></p>
<p>一：server.conf的配置如下：<br></p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">port <span class="number">1198</span>                               <span class="meta">#端口</span></span><br><span class="line">proto tcp                               <span class="meta">#协议</span></span><br><span class="line">dev tun                                 <span class="meta">#采用路由隧道模式tun</span></span><br><span class="line">ca ca.crt                               <span class="meta">#ca证书文件位置</span></span><br><span class="line">cert <span class="keyword">server</span>.crt                         <span class="meta">#服务端公钥名称</span></span><br><span class="line">key <span class="keyword">server</span>.key                          <span class="meta">#服务端私钥名称</span></span><br><span class="line">dh dh.pem                               <span class="meta">#交换证书</span></span><br><span class="line"><span class="keyword">server</span> <span class="number">10.8</span><span class="number">.0</span><span class="number">.0</span> <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>           <span class="meta">#给客户端分配地址池，注意：不能和VPN服务器内网网段有相同&quot;</span></span><br><span class="line">push <span class="string">&quot;route 0.0.0.0 0.0.0.0&quot;</span></span><br><span class="line">push <span class="string">&quot;dhcp-option DNS 208.67.222.222&quot;</span></span><br><span class="line">push <span class="string">&quot;dhcp-option DNS 208.67.220.220&quot;</span></span><br><span class="line">push <span class="string">&quot;route 192.168.0.0 255.255.255.0&quot;</span>   <span class="meta">#允许客户端访问内网172.16.0.0网段</span></span><br><span class="line">ifconfig-pool-persist ipp.txt           <span class="meta">#地址池记录文件位置</span></span><br><span class="line">keepalive <span class="number">10</span> <span class="number">120</span>                        <span class="meta">#存活时间，10秒ping一次,120 如未收到响应则视为断线</span></span><br><span class="line">max-clients <span class="number">100</span>                         <span class="meta">#最多允许100个客户端连接</span></span><br><span class="line">status openvpn-status.log               <span class="meta">#日志记录位置</span></span><br><span class="line">verb <span class="number">3</span>                                  <span class="meta">#openvpn版本</span></span><br><span class="line"><span class="keyword">client</span>-to-<span class="keyword">client</span>                        <span class="meta">#客户端与客户端之间支持通信</span></span><br><span class="line">log /<span class="built_in">var</span>/log/openvpn.log                <span class="meta">#openvpn日志记录位置</span></span><br><span class="line">persist-key     <span class="meta">#通过keepalive检测超时后，重新启动VPN，不重新读取keys，保留第一次使用的keys。</span></span><br><span class="line">persist-tun     <span class="meta">#检测超时后，重新启动VPN，一直保持tun是linkup的。否则网络会先linkdown然后再linkup</span></span><br><span class="line"><span class="keyword">client</span>-config-dir /etc/openvpn/ccd</span><br><span class="line">auth-nocache</span><br><span class="line">cipher AES<span class="number">-256</span>-GCM</span><br><span class="line">ncp-ciphers AES<span class="number">-256</span>-GCM:AES<span class="number">-128</span>-GCM</span><br></pre></td></tr></table></figure>
<p>二：client.ovpn的配置如下：<br></p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">client</span>                  <span class="meta">#指定当前VPN是客户端</span></span><br><span class="line">dev tun                 <span class="meta">#使用tun隧道传输协议</span></span><br><span class="line">proto tcp               <span class="meta">#使用udp协议传输数据</span></span><br><span class="line">remote <span class="number">43.156</span><span class="number">.116</span><span class="number">.201</span> <span class="number">1198</span> <span class="meta">#openvpn服务器IP地址端口号</span></span><br><span class="line">resolv-<span class="keyword">retry</span> infinite   <span class="meta">#断线自动重新连接，在网络不稳定的情况下非常有用</span></span><br><span class="line">nobind                  <span class="meta">#不绑定本地特定的端口号</span></span><br><span class="line">ca ca.crt               <span class="meta">#指定CA证书的文件路径</span></span><br><span class="line">cert <span class="keyword">client</span>.crt         <span class="meta">#指定当前客户端的证书文件路径</span></span><br><span class="line">key <span class="keyword">client</span>.key          <span class="meta">#指定当前客户端的私钥文件路径</span></span><br><span class="line">verb <span class="number">3</span>                  <span class="meta">#指定日志文件的记录详细级别，可选0-9，等级越高日志内容越详细</span></span><br><span class="line">persist-key     <span class="meta">#通过keepalive检测超时后，重新启动VPN，不重新读取keys，保留第一次使用的keys</span></span><br><span class="line">persist-tun     <span class="meta">#检测超时后，重新启动VPN，一直保持tun是linkup的。否则网络会先linkdown然后再linkup</span></span><br><span class="line">remote-cert-tls <span class="keyword">server</span></span><br><span class="line">auth-nocache</span><br><span class="line">cipher AES<span class="number">-256</span>-GCM</span><br><span class="line">ncp-ciphers AES<span class="number">-256</span>-GCM:AES<span class="number">-128</span>-GCM</span><br></pre></td></tr></table></figure>

<p>三：验证<br><br>其他步骤都按照教程完成后，右击WiFi图标–打开“网路和Internet设置”–高级网络设置–更改适配器选项<br><br>打开界面后可以看到OpenVPN TAP-Windows6的红色叉×已经没有了<br><br>然后双击自己正在连接的网络，选择“属性”–共享–勾上“允许其他网络用户通过此计算机的Internet连接来连接”以及“允许其他网络用户控制或禁用共享的Internet连接”–家庭网络连接选择“OpenVPN TAP-Windows6”<br>连接成功后，在windows中打开cmd输入外网的公网地址，如果能ping通，配置就是没有问题的，openvpn就搭建成功啦，但是现在还是无法连接外网<br><br>还需要进行路由配置<br></p>
<p>四：修改了etc&#x2F;sysctl.conf的配置：<br><br><a target="_blank" rel="noopener" href="https://www.nuomiphp.com/serverfault/zh/60489accdc3d0204513861e6.html">参考链接</a><br><br>将net.ipv4.ip_forward &#x3D; 0 改成 net.ipv4.ip_forward &#x3D; 1<br></p>
<p>五：修改路由配置<br><br><a target="_blank" rel="noopener" href="https://www.shuzhiduo.com/A/MAzARoQRJ9/">参考连接</a><br><br>我的内网ip是：192.168.8.4<br><br>（腾讯云服务器）外网的ip是：（公）43.156.116.201    （内）10.0.0.7<br></p>
<p>我在windows端输入的cmd命令是<br><br><code>route delete 0.0.0.0</code><br><br><code>route add 0.0.0.0 mask 0.0.0.0 10.8.0.5 -p</code><br><br><code>route add 192.168.0.0 mask 255.255.255.0 192.168.8.1 -p</code><br></p>
<p>这里输入的10.8.0.5和192.168.8.1是在server.conf中设置的给客户端分配地址池的网关以及你的内网地址的网关<br><br>具体可以看route print中的Gateway一列,如下：<br></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Network</span> Destination        Netmask          Gateway       Interface  Metric</span><br><span class="line">          <span class="attribute">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>          <span class="number">0.0.0.0</span>      <span class="number">192.168.8.1</span>      <span class="number">192.168.8.4</span>     <span class="number">55</span></span><br><span class="line">          <span class="attribute">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>          <span class="number">0.0.0.0</span>         <span class="number">10.8.0.5</span>         <span class="number">10.8.0.6</span>     <span class="number">26</span></span><br><span class="line">         <span class="attribute">10</span>.<span class="number">8</span>.<span class="number">0</span>.<span class="number">0</span>    <span class="number">255.255.255.0</span>         <span class="number">10.8.0.5</span>         <span class="number">10.8.0.6</span>    <span class="number">281</span></span><br><span class="line">         <span class="attribute">10</span>.<span class="number">8</span>.<span class="number">0</span>.<span class="number">4</span>  <span class="number">255.255.255.252</span>         <span class="literal">On</span>-link          <span class="number">10.8.0.6</span>    <span class="number">281</span></span><br><span class="line">         <span class="attribute">10</span>.<span class="number">8</span>.<span class="number">0</span>.<span class="number">6</span>  <span class="number">255.255.255.255</span>         <span class="literal">On</span>-link          <span class="number">10.8.0.6</span>    <span class="number">281</span></span><br><span class="line">         <span class="attribute">10</span>.<span class="number">8</span>.<span class="number">0</span>.<span class="number">7</span>  <span class="number">255.255.255.255</span>         <span class="literal">On</span>-link          <span class="number">10.8.0.6</span>    <span class="number">281</span></span><br></pre></td></tr></table></figure>
<p>其中前面两行就是内网和外网的路由信息，上面需要输入的信息就是Gateway列的192.168.8.1和10.8.0.5<br></p>
<p>至此配置完成，就可以成功连接外网啦</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/12/28/%E6%89%B9%E5%A4%84%E7%90%86%E5%B0%8F%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/28/%E6%89%B9%E5%A4%84%E7%90%86%E5%B0%8F%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">批处理小工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-12-28 17:29:00 / Modified: 19:47:34" itemprop="dateCreated datePublished" datetime="2022-12-28T17:29:00+08:00">2022-12-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bat/" itemprop="url" rel="index"><span itemprop="name">.bat</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>3 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>原因：写这个批处理的原因是：在测试手机包的时候遇到bug需要截图&#x2F;录视频&#x2F;拿log上传到bug单，由于每次都<br>需要再手机上截下来然后传到电脑，再从电脑下载下来进行处理后上传，次数不多的时候感觉倒还好，次数一多<br>起来，这么操作感觉费时间还麻烦，我就想着有没有一种办法可以直接在电脑截手机的图，如此便省去了传来传<br>去的麻烦。于是我想到了批处理。<br><br>网上有很多关于批处理的教程，有一键截屏，一键录屏，一键拉取log的，其本质都是用的adb，有一点点adb的基<br>础就可以轻松完成这三个的批处理，我便不再赘述，这里放上我的代码方便自己日后取用。我写这个工具是可以用就行，因此除了功<br>能代码以外，没有做其他任何优化，略简单一些。<br></p>
<h6 id="一键截屏（非原创）"><a href="#一键截屏（非原创）" class="headerlink" title="一键截屏（非原创）"></a>一键截屏（非原创）</h6><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@ECHO off</span><br><span class="line"><span class="keyword">set</span> Str=快速截屏至电脑_V2.0_20170829 by <span class="comment">HRD</span></span><br><span class="line">title <span class="comment">%Str%</span></span><br><span class="line">ECHO       <span class="comment">%Str%</span></span><br><span class="line">ECHO 等待<span class="comment">Android</span>设备插入<span class="comment">...</span></span><br><span class="line">ECHO <span class="comment">wait-for-device</span></span><br><span class="line">adb <span class="comment">wait-for-device</span>			</span><br><span class="line">ECHO <span class="comment">Start...</span></span><br><span class="line">ECHO 已识别到<span class="comment">Android</span>设备<span class="comment">...</span></span><br><span class="line">ECHO 正在截图中，请稍候<span class="comment">...</span></span><br><span class="line">adb <span class="comment">shell screencap -p</span> /sdcard/<span class="comment">screenshot.png</span></span><br><span class="line">ECHO.[手机截屏成功]</span><br><span class="line">ECHO 正在将截图复制到<span class="comment">PC</span>，请稍候<span class="comment">...</span></span><br><span class="line">adb <span class="comment">pull</span> /sdcard/<span class="comment">screenshot.png  C:</span>/Users/千羽/Desktop/<span class="comment">screencap</span></span><br><span class="line">ECHO 复制到<span class="comment">pc</span>成功</span><br><span class="line">ECHO 正在修改名字，请稍后<span class="comment">...</span></span><br><span class="line">ren <span class="comment">C:\Users\</span>千羽<span class="comment">\Desktop\screencap\screenshot.png</span> <span class="comment">&quot;%date:~0,4%%date:~5,2%%date:~8,2%%time:~0,2%%time:~3,2%%time:~6,2%.png&quot;</span> </span><br><span class="line">ECHO 修改名字成功，正在删除手机中的截图，请稍后<span class="comment">...</span></span><br><span class="line">adb <span class="comment">shell rm</span> /sdcard/<span class="comment">screenshot.png</span></span><br><span class="line">ECHO 删除手机截图成功</span><br><span class="line">ECHO 截图成功</span><br><span class="line">timeout /t <span class="number">2</span></span><br><span class="line">echo <span class="number">2</span>s后退出</span><br></pre></td></tr></table></figure>
<p>这个是我当时在搜adb截屏命令的时候搜出来的，具体是哪几篇博文我已经忘了，所以我只能标明是非原创，无法注明出处<br><br>这个虽然也很精简，但是比起我最初的想法更佳完善，有几个点是我当时没有想到的，我的想法是能截图就行，原本我打<br>算一行代码完事，但是后来查了很多个博主的代码，发现其实这个也可以写得很复杂很完善，不禁感叹他们把事情做到细致完美的能力<br><br>在结合了几篇博文的代码以后，去掉一些我认为不必要的东西，然后在复制粘贴的基础上修改后，就变成了上面这个代码的模样<br><br>再精简一下，其实只有几行命令，分别是：<br></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">adb wait-<span class="keyword">for</span>-device	</span><br><span class="line">adb shell screencap -p <span class="regexp">/sdcard/</span>screenshot.png</span><br><span class="line">adb pull <span class="regexp">/sdcard/</span>screenshot.png  C:<span class="regexp">/Users/</span>千羽<span class="regexp">/Desktop/</span>screencap</span><br><span class="line">ren C:\Users\千羽\Desktop\screencap\screenshot.png <span class="string">&quot;%date:~0,4%%date:~5,2%%date:~8,2%%time:~0,2%%time:~3,2%%time:~6,2%.png&quot;</span> </span><br><span class="line">adb shell rm <span class="regexp">/sdcard/</span>screenshot.png</span><br><span class="line">timeout /t <span class="number">2</span></span><br></pre></td></tr></table></figure>
<ol>
<li>等待连接adb命令（这个命令在做这个批处理前我并不知道有这个命令，是在搜索过程中看到别人在用，然后特地去查了一下才发现的这个命令，算是一个意外的收获）<br></li>
<li>截图命令：这里是执行截图命令后将图片保存在手机中<br></li>
<li>pull命令：将截图从手机中传输到电脑中<br></li>
<li>ren重命名命令：这个命令是属于批处理的命令，不是adb命令，也是我在搜索过程中的另一个收获，我在找到这个命令之前甚至没有想过要给文件重命名，想着直接性图<br>片覆盖旧图片就好了，但是其实如果在需要连续截图的时候，或者截多张图片的时候，新图片覆盖旧图片的方式就会显得有点麻烦了，所以即使当时在重命名这条命令上掉了<br>坑，还是花了不少闲时把它搞好的。<br><br>这里记录一下这个坑：当时我搜索出来的命令是：<br><br><code>ren C:\Users\千羽\Desktop\screencap\screenshot.png &quot;%date:~0,4%%date:~5,2%%date:~8,2%%time:~0,2%%time:~3,2%%time:~6,2%&quot;.png </code><br>这条命令无论我怎么修改输出，它都说参数格式不正确，我当时的注意力是放在原文件名和新文件名上，以为这两个的格式不对，所以一直在修改这俩个文件名字，但是无论<br>我当时尝尽任何方法，都提示说参数格式不正确。没有办法，我只能选择排除法，首先上网查找资料，ren命令的格式是什么样子的，<code>ren 路径\旧文件名 新文件名</code>，这么看<br>来，可以排除是ren命令格式的问题。然后我看向后面的新文件名，这串是以时间来命名的命令，当时看见这串命令的时候毫无违和感，感觉就应该是这样的，直到我把这行代码<br><br><code>&quot;%date:~0,4%%date:~5,2%%date:~8,2%%time:~0,2%%time:~3,2%%time:~6,2%&quot;</code><br><br>改成123，也就是把新文件的名字改成123.png，然后执行命令成功时，我瞬间反应过来，是双引号引早了，双引号应该要把.png包括在内，难怪一直提示参数格式不正确。至此，这个坑填完了。</li>
<li>删除截图命令：这个命令也是我之前没考虑到的地方，及时删除不需要的文件释放内存，我觉得这是一种很好的代码习惯和代码意识，这也是一个收获。<h6 id="一键录屏（非原创）"><a href="#一键录屏（非原创）" class="headerlink" title="一键录屏（非原创）"></a>一键录屏（非原创）</h6>录屏和截屏原理都是一样的，只是adb命令稍有不同而已，这里不再啰嗦，直接记录一下代码<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@ECHO off</span><br><span class="line"><span class="keyword">set</span> Str=快速录屏至电脑_V2.0_20170829 by <span class="comment">HRD</span></span><br><span class="line">title <span class="comment">%Str%</span></span><br><span class="line">ECHO       <span class="comment">%Str%</span></span><br><span class="line">ECHO 等待<span class="comment">Android</span>设备插入<span class="comment">...</span></span><br><span class="line">ECHO <span class="comment">wait-for-device</span></span><br><span class="line">adb <span class="comment">wait-for-device</span></span><br><span class="line">ECHO <span class="comment">Start...</span></span><br><span class="line">ECHO 已识别到<span class="comment">Android</span>设备<span class="comment">...</span></span><br><span class="line">ECHO 正在录屏中，请稍候<span class="comment">...</span></span><br><span class="line">adb <span class="comment">shell screenrecord</span> /sdcard/<span class="comment">screenrecord.mp4</span></span><br><span class="line">ECHO.[手机录频完成]</span><br><span class="line">ECHO 正在将录屏复制到<span class="comment">PC</span>，请稍候<span class="comment">...</span></span><br><span class="line">adb <span class="comment">pull</span> /sdcard/<span class="comment">screenrecord.mp4 C:</span>/Users/千羽/Desktop/<span class="comment">screenrecord</span></span><br><span class="line">ECHO 复制到<span class="comment">pc</span>成功</span><br><span class="line">ECHO 正在修改名字，请稍后<span class="comment">...</span></span><br><span class="line">ren <span class="comment">C:\Users\</span>千羽<span class="comment">\Desktop\screenrecord\screenrecord.mp4</span> <span class="comment">&quot;%date:~0,4%%date:~5,2%%date:~8,2%%time:~0,2%%time:~3,2%%time:~6,2%.mp4&quot;</span> </span><br><span class="line">ECHO 修改名字成功，正在删除手机中的录屏，请稍后<span class="comment">...</span></span><br><span class="line">adb <span class="comment">shell rm</span> /sdcard/<span class="comment">screenrecord.mp4</span></span><br><span class="line">ECHO 删除手机录屏成功</span><br><span class="line">ECHO 截图成功</span><br><span class="line">timeout /t <span class="number">2</span></span><br><span class="line">echo <span class="number">2</span>s后退出</span><br></pre></td></tr></table></figure>
######拉最新的视频文件（半原创，参考了bat脚本—for循环结合adb命令的格式）<br>因为adb的录屏只能录取三分钟的视频，但有的时候录屏会比较长，超过三分钟的视频该怎么办呢，我当时想的办法时，先用手机自带录屏软件录制下来，然后用adb拉去出来<br><br>这个时候又有一个新的问题，手机中视频文件太多的时候怎么办，难不成要全部都拉到电脑或者把非bug的视频都删掉吗，如果是测试机的话当然把非当前bug的视频删掉是可以的，<br>当时如果是自己正在用的手机如此操作显然行不通，那怎么办呢，我想到可以利用时间排序的方式，获取最新的那几个，于是写了代码如下：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="variable">@ECHO</span> off</span><br><span class="line">for /f <span class="string">&quot;delims=&quot;</span> %%i in (<span class="string">&#x27;adb shell ls -r /sdcard/DCIM/Screenshots/*.mp4&#x27;</span>) do (</span><br><span class="line">	adb pull %%i <span class="attribute">C</span>:/Users/千羽/Desktop/new_screenrecord</span><br><span class="line">    )</span><br><span class="line">	pause</span><br></pre></td></tr></table></figure></li>
</ol>
<h6 id="一键拉取log"><a href="#一键拉取log" class="headerlink" title="一键拉取log"></a>一键拉取log</h6><p>拉日志的adb命令是：<code>adb logcat &gt;E:/temp/log.txt.</code>,这行命令过后，开始进行操作获取日志信息，获取完毕后，按ctrl+c结束命令就可以拉到log啦</p>
<p>这里over啦</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/10/29/%E5%B0%86hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0%E6%89%8B%E6%9C%BA%E7%9A%84nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/29/%E5%B0%86hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0%E6%89%8B%E6%9C%BA%E7%9A%84nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">将hexo博客部署到手机的nginx服务器中</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-10-29 19:36:50 / Modified: 19:51:15" itemprop="dateCreated datePublished" datetime="2022-10-29T19:36:50+08:00">2022-10-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nginx/" itemprop="url" rel="index"><span itemprop="name">nginx</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>接第一章—在手机搭建nginx服务器</p>
<h2 id="一-在手机搭建nginx服务器"><a href="#一-在手机搭建nginx服务器" class="headerlink" title="一. 在手机搭建nginx服务器"></a>一. <a href="https://caixuya.github.io/2022/10/28/%E5%9C%A8%E6%89%8B%E6%9C%BA%E6%90%AD%E5%BB%BAnginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">在手机搭建nginx服务器</a></h2><h2 id="二-进阶-把博客部署到nginx"><a href="#二-进阶-把博客部署到nginx" class="headerlink" title="二. 进阶 把博客部署到nginx"></a>二. 进阶 把博客部署到nginx</h2><h3 id="8-将hexo博客部署到手机的nginx服务器中"><a href="#8-将hexo博客部署到手机的nginx服务器中" class="headerlink" title="8.将hexo博客部署到手机的nginx服务器中"></a>8.将hexo博客部署到手机的nginx服务器中<br></h3><p>如何搭建hexo博客在我的另一篇博文里，附上连接<a href="https://caixuya.github.io/2020/04/10/linux%E5%92%8Cwindows%E7%AB%AF%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%8C%E9%83%A8%E7%BD%B2%E5%88%B0github%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%9F%9F%E5%90%8D%E4%B8%80%E6%9D%A1%E9%BE%99%E6%95%99%E7%A8%8B%EF%BC%8C%E9%99%84%E4%B8%8A%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">搭建hexo博客</a><br></p>
<blockquote>
<h4 id="8-1-安装vim"><a href="#8-1-安装vim" class="headerlink" title="8.1 安装vim"></a>8.1 安装vim<br></h4><p>输入命令<code>pkg install vim</code><br></p>
<h4 id="8-2-把hexo的项目传到手机中"><a href="#8-2-把hexo的项目传到手机中" class="headerlink" title="8.2 把hexo的项目传到手机中"></a>8.2 把hexo的项目传到手机中<br></h4><p>具体步骤是先压缩hexo项目（或者直接压缩hexo项目下的public文件夹）然后用蓝牙传到手机（我的手机太旧了没办法用usb连接电脑直接拉，如果有usb连接电脑直接拉的话会简单一点）<br><br>然后找到传过来的压缩文件，用命令解压缩，解压缩网上有教程，我这里就不赘述了<br></p>
<h4 id="8-3-找到hexo所在的位置"><a href="#8-3-找到hexo所在的位置" class="headerlink" title="8.3 找到hexo所在的位置"></a>8.3 找到hexo所在的位置<br></h4><p>这里找了一下地址是：<code>/storage/shared/Download/Bluetooth/hexo</code><br></p>
<h4 id="8-4-找到nginx-conf"><a href="#8-4-找到nginx-conf" class="headerlink" title="8.4 找到nginx.conf"></a>8.4 找到nginx.conf<br></h4><p>如果直接用<code>apt -y install nginx</code>这条命令安装nginx的话，配置文件大概率是在<code>/data/data/com.termux/files/usr/etc/nginx/nginx.conf</code><br></p>
<h4 id="8-5-找到nginx主目录"><a href="#8-5-找到nginx主目录" class="headerlink" title="8.5 找到nginx主目录"></a>8.5 找到nginx主目录<br></h4><h5 id="8-5-1-输入命令查看路径"><a href="#8-5-1-输入命令查看路径" class="headerlink" title="8.5.1 输入命令查看路径"></a>8.5.1 输入命令查看路径<br></h5><p><code>pkg files nginx</code><br></p>
<h5 id="8-5-2-找主目录的原因："><a href="#8-5-2-找主目录的原因：" class="headerlink" title="8.5.2 找主目录的原因："></a>8.5.2 找主目录的原因：<br></h5><p>为什么要找这个nginx主目录呢，因为需要把hexo的public文件夹全部复制到nginx主目录下，也就是和nginx的html文件夹同级目录下，然后把nginx.conf的路径由html改成public就可以啦，原理就是把原本nginx的html文件夹换成我想让它显示的html文件夹<br></p>
<h5 id="8-5-3-找到nginx主目录"><a href="#8-5-3-找到nginx主目录" class="headerlink" title="8.5.3 找到nginx主目录"></a>8.5.3 找到nginx主目录<br></h5><p>如果直接用<code>apt -y install nginx</code>这条命令安装nginx的话，主目录大概率是在<code>/data/data/com.termux/files/usr/share/nginx</code><br><br>如果不确定的话，可以cd到这个路径下，命令是：<code>cd /data/data/com.termux/files/usr/share/nginx</code>，使用<code>ls</code>命令查看一下，此时发现会有一个html文件夹<br><br><code>cd</code>到html文件夹中<code>cd html</code>，然后用<code>ls</code>命令继续查看，发现里面有两个文件，分别是<code>50x.html</code>和<code>index.html</code>，这样就可以确定刚才找到的主目录路径没有错了<br></p>
<h4 id="8-6-复制"><a href="#8-6-复制" class="headerlink" title="8.6 复制"></a>8.6 复制<br></h4><p>将public文件夹整个复制到nginx主目录下：<code>cp -r /storage/shared/Download/Bluetooth/hexo/public /data/data/com.termux/files/usr/share/nginx</code><br></p>
<h4 id="8-7-改配置文件"><a href="#8-7-改配置文件" class="headerlink" title="8.7 改配置文件"></a>8.7 改配置文件<br></h4><h5 id="8-7-1-打开配置文件"><a href="#8-7-1-打开配置文件" class="headerlink" title="8.7.1 打开配置文件"></a>8.7.1 打开配置文件<br></h5><p>这里用到的路径是步骤8.4中找到的路径，使用命令<code>vim /data/data/com.termux/files/usr/etc/nginx/nginx.conf</code><br></p>
<h5 id="8-7-2-修改配置文件的路径"><a href="#8-7-2-修改配置文件的路径" class="headerlink" title="8.7.2 修改配置文件的路径"></a>8.7.2 修改配置文件的路径<br></h5><p>打开配置文件后，找到server，在server的大括号里找到location，在location中找到root,这个时候看到root后面的路径是&#x2F;data&#x2F;data&#x2F;com.termux&#x2F;files&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html，把最后面的html改成public，其他不要动，注意不要把最后面的分号删掉了<br></p>
<h5 id="8-7-3-保存修改"><a href="#8-7-3-保存修改" class="headerlink" title="8.7.3 保存修改"></a>8.7.3 保存修改</h5><p>按下键盘的&#96;&#96;esc<code>键，或者点击手机的</code>esc<code>按钮，然后输入命令</code>:wq&#96;保存并退出</p>
<h5 id="8-8-重启nginx"><a href="#8-8-重启nginx" class="headerlink" title="8.8 重启nginx"></a>8.8 重启nginx</h5><p>nginx -s reload</p>
<h5 id="8-9-成功"><a href="#8-9-成功" class="headerlink" title="8.9 成功"></a>8.9 成功</h5><p>手机在浏览器输入地址：<code>192.168.92.62:8080</code>成功跳转到博客中</p>
<h5 id="我悟了"><a href="#我悟了" class="headerlink" title="我悟了"></a>我悟了</h5><p>这个时候我知道为什么我之前失败那么多次了，每一次连接手机wifi的时候ip地址默认是动态的，所以我输入之前的获取的ip地址是没有用的，也是犯了一个很基础的错误吧，一个乌龙搞了这么久，拿时间买了一个教训，干巴爹<br></p>
<h5 id="9-设置固定ip"><a href="#9-设置固定ip" class="headerlink" title="9. 设置固定ip"></a>9. 设置固定ip</h5><p>连接wifi的手机设置固定IP的方法：打开设置，进入WLAN，长按连接的WIFI，进入修改网络，进入IP，勾选静态，修改IP地址后，保存即可。参考连接：<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/72ee561a463248a06138dfa6.html">手机热点怎么设置固定ip</a></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/10/28/%E5%9C%A8%E6%89%8B%E6%9C%BA%E6%90%AD%E5%BB%BAnginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/28/%E5%9C%A8%E6%89%8B%E6%9C%BA%E6%90%AD%E5%BB%BAnginx%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">在手机搭建nginx服务器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-28 10:45:36" itemprop="dateCreated datePublished" datetime="2022-10-28T10:45:36+08:00">2022-10-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-29 19:52:26" itemprop="dateModified" datetime="2022-10-29T19:52:26+08:00">2022-10-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nginx/" itemprop="url" rel="index"><span itemprop="name">nginx</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本篇博文参考网站：<a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv13930032">https://www.bilibili.com/read/cv13930032</a><br></p>
<p>起因：某一天刷抖音的时候看到可以在手机上搭建nginx服务器，觉得很好玩，就在网上搜了教程试了一下，遇到了一些坑，这里记录一下自己的解决思路和解决方法，方便自己日后查看<br></p>
<h2 id="一-在手机搭建nginx服务器"><a href="#一-在手机搭建nginx服务器" class="headerlink" title="一. 在手机搭建nginx服务器"></a>一. 在手机搭建nginx服务器</h2><h3 id="1-按照教程走"><a href="#1-按照教程走" class="headerlink" title="1.按照教程走"></a>1.按照教程走<br></h3><blockquote>
<p>发现安装完nginx后，浏览器无法打开<code>127.0.0.1:8080</code> <br></p>
</blockquote>
<h3 id="2-检查问题"><a href="#2-检查问题" class="headerlink" title="2.检查问题"></a>2.检查问题<br></h3><blockquote>
<p>在termux中输入<code>nginx -V</code> ，发现报错：CANNOT LINK EXECUTABLE “nginx”:library “libssl.so.3” not found aborted<br><br>网上查找相关资料，发现没有对应的解决办法<br></p>
</blockquote>
<h3 id="3-开始各种尝试"><a href="#3-开始各种尝试" class="headerlink" title="3.开始各种尝试"></a>3.开始各种尝试<br></h3><blockquote>
<h4 id="3-1-首先获取存储权限"><a href="#3-1-首先获取存储权限" class="headerlink" title="3.1 首先获取存储权限"></a>3.1 首先获取存储权限<br></h4><p>输入<code>termux-setup-storage</code><br></p>
<h4 id="3-2-然后换源"><a href="#3-2-然后换源" class="headerlink" title="3.2 然后换源"></a>3.2 然后换源<br></h4><p>输入<code>termux-change-repo</code><br><br>步骤是：输入命令后，按空格键（蓝牙键盘）选择需要更换的仓库，按回车键确定；然后按空格键选择需要更换的源，按回车键确定。<br></p>
<h4 id="3-3-更新包"><a href="#3-3-更新包" class="headerlink" title="3.3 更新包"></a>3.3 更新包<br></h4><p>先输入<code>apt update</code>，然后输入<code>apt upgrade</code><br></p>
</blockquote>
<h3 id="4-解决问题"><a href="#4-解决问题" class="headerlink" title="4.解决问题"></a>4.解决问题<br></h3><blockquote>
<p>做完以上尝试后，再次执行<code>nginx -V</code>，发现报错不见了，并且正确显示了版本号，至此问题解决<br></p>
</blockquote>
<h3 id="5-新的问题接踵而至"><a href="#5-新的问题接踵而至" class="headerlink" title="5.新的问题接踵而至"></a>5.新的问题接踵而至<br></h3><blockquote>
<p>当我兴冲冲地区浏览器输入地址<code>127.0.0.1:8080</code>时，发现还是无法打开该页面，我突然想到刚才资料说不用手动去开启，因为一般安装完都会自动开启的，但是抱着试一下的心态，还是尝试输入<code>nginx</code>这条开启nginx的命令，输入后发现问题解决，nice~<br></p>
</blockquote>
<h3 id="6-查看ip"><a href="#6-查看ip" class="headerlink" title="6.查看ip"></a>6.查看ip<br></h3><blockquote>
<p>我这里是做服务器的这台手机连接另一部手机开的热点，连上热点后，做服务器的这台手机输入命令查看ip,命令是：<code>ifconfig</code><br></p>
</blockquote>
<h3 id="7-成功搭建nginx服务器"><a href="#7-成功搭建nginx服务器" class="headerlink" title="7.成功搭建nginx服务器"></a>7.成功搭建nginx服务器<br></h3><blockquote>
<p>在做服务器的这台手机的浏览器中输入ip:8080，即<code>192.168.92.62:8080</code>，成功跳转到nginx界面<br></p>
</blockquote>
<p>搭建nginx服务器完成<br></p>
<h2 id="二-进阶-把博客部署到nginx"><a href="#二-进阶-把博客部署到nginx" class="headerlink" title="二. 进阶 把博客部署到nginx"></a>二. <a href="https://caixuya.github.io/2022/10/29/%E5%B0%86hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0%E6%89%8B%E6%9C%BA%E7%9A%84nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">进阶 把博客部署到nginx</a></h2><p>做完这一切，突然有一个想法，之前把自己的博客部署到买的服务器上面，经常要花钱，后来就放弃了，只部署到github上面。<br><br>突然想到现在既然已经部署了一个nginx服务器了，要不就顺带把博客部署到服务器上面吧，说干就干，开始找教程。<br><br>但是经过多次尝试还是失败了，没找到原因，磕磕绊绊地弄了一天，决定还是用最原始的办法，把hexo博客目录下的整个public复制到nginx主目录下去，再次进行尝试。<br></p>
<h3 id="10-卸载nginx"><a href="#10-卸载nginx" class="headerlink" title="10.卸载nginx"></a>10.卸载nginx<br></h3><p>参考连接<a target="_blank" rel="noopener" href="http://t.zoukankan.com/smlile-you-me-p-11404110.html">Ubuntu16.04使用apt安装完nginx常见问题</a><br></p>
<blockquote>
<p>在实行进阶版本的时候，失败了很多次，经历了很多次卸载重新搭建nginx的情况，这里也记录一下卸载的步骤吧<br></p>
<h4 id="10-1-错误尝试"><a href="#10-1-错误尝试" class="headerlink" title="10.1 错误尝试"></a>10.1 错误尝试<br></h4><p>在输入<code>pkg files nginx</code>这个命令找到所有nginx文件夹的路径后，我尝试使用一个个文件夹删除的办法，但是后来一想，linux有<code>remove</code>命令可以用来卸载，那termix是否也有这类命令呢<br></p>
<h4 id="10-2-正确尝试"><a href="#10-2-正确尝试" class="headerlink" title="10.2 正确尝试"></a>10.2 正确尝试<br></h4><h5 id="10-2-1-尝试输入卸载命令"><a href="#10-2-1-尝试输入卸载命令" class="headerlink" title="10.2.1 尝试输入卸载命令"></a>10.2.1 尝试输入卸载命令<br></h5><p><code>pkg remove nginx</code>(或者是这条命令：<code>apt remove nginx</code>) ，当它提示yes or not时，我明白我输入的命令是对的<br></p>
<h5 id="10-2-2-卸载更彻底一些"><a href="#10-2-2-卸载更彻底一些" class="headerlink" title="10.2.2 卸载更彻底一些"></a>10.2.2 卸载更彻底一些<br></h5><p>再执行两个卸载命令：<code>apt autoremove nginx</code><br><code>apt --purge remove nginx</code><br></p>
<h5 id="10-2-3-报错"><a href="#10-2-3-报错" class="headerlink" title="10.2.3 报错"></a>10.2.3 报错<br></h5><p>此时报错说有一个文件夹因为不是空的所以没有卸载<br></p>
<h5 id="10-2-4-根据报错内容删除文件夹"><a href="#10-2-4-根据报错内容删除文件夹" class="headerlink" title="10.2.4 根据报错内容删除文件夹"></a>10.2.4 根据报错内容删除文件夹<br></h5><p>使用删除命令<code>rm -rf /data/data/com.termux/files/usr/var/log/nginx</code><br></p>
<h5 id="10-2-5-验证上一步操作是否解决问题"><a href="#10-2-5-验证上一步操作是否解决问题" class="headerlink" title="10.2.5 验证上一步操作是否解决问题"></a>10.2.5 验证上一步操作是否解决问题<br></h5><p>再次执行导致报错的命令，<code>apt --purge remove nginx</code><br></p>
</blockquote>
<p>完成<br></p>
<h3 id="11-安装nginx"><a href="#11-安装nginx" class="headerlink" title="11. 安装nginx"></a>11. 安装nginx<br></h3><blockquote>
<p>之所以在文章的最后记录如何安装nginx，是因为这个安装教程网上很多，本来是不想记录下来的，但是因为多次失败导致需要多次安装卸载nginx，所以还是决定写下来方便自己等会直接用<br></p>
<h4 id="11-1-安装命令"><a href="#11-1-安装命令" class="headerlink" title="11.1 安装命令"></a>11.1 安装命令<br></h4><p>输入命令<code>apt -y install nginx</code><br></p>
</blockquote>
<p>完成<br></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/06/04/hexo%E7%9A%84cname%E8%AE%B0%E5%BD%95%E6%80%8E%E4%B9%88%E6%B0%B8%E8%BF%9C%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/04/hexo%E7%9A%84cname%E8%AE%B0%E5%BD%95%E6%80%8E%E4%B9%88%E6%B0%B8%E8%BF%9C%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">hexo的cname记录怎么永远设置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-06-04 15:32:09" itemprop="dateCreated datePublished" datetime="2022-06-04T15:32:09+08:00">2022-06-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-10-31 01:23:26" itemprop="dateModified" datetime="2022-10-31T01:23:26+08:00">2022-10-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>197</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前提：已经设置好github的page和弄好域名解析<br><br>具体教程：<a href="https://caixuya.github.io/2020/04/10/linux%E5%92%8Cwindows%E7%AB%AF%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2%EF%BC%8C%E9%83%A8%E7%BD%B2%E5%88%B0github%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%9F%9F%E5%90%8D%E4%B8%80%E6%9D%A1%E9%BE%99%E6%95%99%E7%A8%8B%EF%BC%8C%E9%99%84%E4%B8%8A%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">搭建hexo博客</a><br><br>然后是这两步<br><br>1.在blog目录下敲下面这条命令，每一次在生成blog的时候，都会生成一个cname的文件，<br><br><code>npm install hexo-generator-cname --save</code><br>2.在hexo博客主目录的_config.yml文件中最末尾新开一行，添加这句代码<br><br><code>Plugins: hexo-generator-cname</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/05/06/%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0lambda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/06/%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0lambda/" class="post-title-link" itemprop="url">匿名函数lambda</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-06 23:26:25 / Modified: 23:26:48" itemprop="dateCreated datePublished" datetime="2022-05-06T23:26:25+08:00">2022-05-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>891</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">g = <span class="keyword">lambda</span> x: x + <span class="number">1</span></span><br><span class="line"><span class="comment"># 上面这句等价于这句</span></span><br><span class="line"><span class="comment">#def g(x):</span></span><br><span class="line"><span class="comment">#    return x + 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 无参数</span></span><br><span class="line">t = <span class="keyword">lambda</span>: <span class="literal">True</span></span><br><span class="line">wc = <span class="keyword">lambda</span>: <span class="string">&quot;这是一个无参的lambda&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一个或多个参数</span></span><br><span class="line">b = <span class="keyword">lambda</span> x: x ** <span class="number">3</span></span><br><span class="line">c = <span class="keyword">lambda</span> x, y=<span class="number">3</span>: x * y</span><br><span class="line">cc = <span class="keyword">lambda</span> name, age: (name, age)</span><br><span class="line">a = <span class="keyword">lambda</span> x, y, z: x + y + z</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不定长参数</span></span><br><span class="line">d = <span class="keyword">lambda</span> *z: <span class="built_in">sum</span>(z) / <span class="built_in">len</span>(z)</span><br><span class="line"><span class="comment"># *z为不定长参数，可以输入多个参数，没有固定长度，可用于求取平均值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 键值对参数</span></span><br><span class="line">e = <span class="keyword">lambda</span> **arg: arg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回多个表达式（需要将表达式用元组或列表的方式返回）</span></span><br><span class="line">dg = <span class="keyword">lambda</span> a, b: (a * b, a + b, a // b, a / b, a % b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#map函数</span></span><br><span class="line">li = <span class="built_in">map</span>(<span class="keyword">lambda</span> x: x * x, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(t())</span><br><span class="line">    <span class="built_in">print</span>(wc())</span><br><span class="line">    <span class="built_in">print</span>(g(<span class="number">1</span>))</span><br><span class="line">    <span class="built_in">print</span>(b(<span class="number">1</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;sum = &#x27;</span>, a(<span class="number">3</span>, <span class="number">6</span>, <span class="number">2</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#可以直接在print中用f-string输出，其中:.2f表示显示小数点后两位</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;梯形 = <span class="subst">&#123;(<span class="keyword">lambda</span> tx, tk, h: (tx + tk) * h / <span class="number">2</span>)(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>):<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#可以直接输出</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x * x, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])))  <span class="comment"># 1</span></span><br><span class="line">    <span class="comment">#也可以在上面定义</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">list</span>(li))</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(cc(age=<span class="number">25</span>, name=<span class="string">&quot;小明&quot;</span>))</span><br><span class="line">    <span class="built_in">print</span>(c(<span class="number">8</span>))</span><br><span class="line">    <span class="built_in">print</span>(d(<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">10</span>))</span><br><span class="line">    <span class="built_in">print</span>(e(yellow=<span class="number">1</span>, blue=<span class="number">2</span>))</span><br><span class="line">    <span class="built_in">print</span>(e(a=<span class="number">34</span>, b=<span class="number">56</span>))</span><br><span class="line">    <span class="built_in">print</span>(dg(<span class="number">10</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/05/06/%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95%E4%B9%8B--%E6%94%B9%E8%A1%A8%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/06/%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95%E4%B9%8B--%E6%94%B9%E8%A1%A8%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">测试方法之改表测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-06 23:26:25 / Modified: 23:26:27" itemprop="dateCreated datePublished" datetime="2022-05-06T23:26:25+08:00">2022-05-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>151</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>为什么要改表测试：</p>
<p>1.检查配置表中的字段是否生效</p>
<p>2.测试“环境配置”</p>
<p>举例：抽奖得抽100次以后，也就是第101次数才能抽到，为了测试方便，把100次改成10次</p>
<p>3.权重测试</p>
<p>举例：同样是抽奖的，改成10次后，担心改了抽奖次数后，概率变高，所以把概率调成0，变成必须让这个奖励在第11次抽到</p>
<p>4.容错：配置空白</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en,zh-CN,default">
    <link itemprop="mainEntityOfPage" href="http://caixuya.github.io/2022/05/06/%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="caixuya">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tia的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/06/%E8%BF%94%E5%9B%9E%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">“返回函数”、“闭包”、“nonlocal”关键字</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-05-06 23:26:25 / Modified: 23:26:50" itemprop="dateCreated datePublished" datetime="2022-05-06T23:26:25+08:00">2022-05-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>723</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="返回函数"><a href="#返回函数" class="headerlink" title="返回函数"></a>返回函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count</span>():</span><br><span class="line">    fs = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="keyword">return</span> i * i</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> g <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">    fs.append(f(g))</span><br><span class="line"><span class="keyword">return</span> fs</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">例子的延申：</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count</span>():</span><br><span class="line">    fs = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">g</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">        <span class="keyword">return</span> i * i</span><br><span class="line">    <span class="keyword">return</span> f()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">    fs.append(g(k))</span><br><span class="line"><span class="keyword">return</span> fs</span><br></pre></td></tr></table></figure>

<h3 id="“闭包”和“nonlocal”关键词"><a href="#“闭包”和“nonlocal”关键词" class="headerlink" title="“闭包”和“nonlocal”关键词"></a>“闭包”和“nonlocal”关键词</h3><p>闭包：就是能够读取其他函数内部变量的函数，其实就是内层函数引用了外层函数的局部变量，可以理解为“定义在一个函数内部的函数”，本质上，闭包是将函数内部和函数外部连接起来的桥梁。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inc</span>():</span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fn</span>():</span><br><span class="line">        <span class="comment"># 仅读取x的值:</span></span><br><span class="line">        <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    f = inc()</span><br><span class="line">    <span class="built_in">print</span>(f())  <span class="comment"># 打印出来的结果是：1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果只是读外层变量的值，我们会发现返回的闭包函数调用一切正常，但是，如果对外层变量赋值，由于Python解释器会把<code>x</code>当作函数<code>fn()</code>的局部变量，它会报错，这个时候，用nonlocal关键词定义一下内部函数的x，即初始化内部的x，就像外层函数给x定义，赋初始值x&#x3D;0一样，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">inch</span>():</span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fn</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> x</span><br><span class="line">        x = x + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    f = inch()</span><br><span class="line">    <span class="built_in">print</span>(f())  <span class="comment"># 打印出来的结果是:1</span></span><br><span class="line">    <span class="built_in">print</span>(f())  <span class="comment"># 打印出来的结果是:2</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="caixuya"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">caixuya</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Caixuya" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Caixuya" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:214089030@qq.com" title="E-Mail → mailto:214089030@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备20064368号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">caixuya</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">73k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">1:06</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/undefined/anime.min.js"></script>
  <script src="/undefined/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














    <div id="pjax">
  

  

    </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
